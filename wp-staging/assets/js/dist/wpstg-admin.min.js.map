{"version":3,"file":"wpstg-admin.min.js","sources":["../src/modules/wpstg-dom-utils.js","../src/modules/wpstg-clone-staging.js","../src/modules/wpstg-directory-navigation.js","../src/modules/wpstg-exclude-filters.js","../src/modules/wpstg-modal.js","../src/modules/wpstg-reset-modal.js","../src/wpstg-admin.js"],"sourcesContent":["/**\n * WP Staging basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Enable/Disable cloning for staging site\n */\nexport default class WpstgCloneStaging {\n  constructor(\n      pageWrapperId = '#wpstg-clonepage-wrapper',\n      wpstgObject = wpstg,\n  ) {\n    this.pageWrapper = dom.qs(pageWrapperId);\n    this.wpstgObject = wpstgObject;\n    this.enableButtonId = '#wpstg-enable-staging-cloning';\n    this.enableAction = 'wpstg_enable_staging_cloning';\n\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    if (this.pageWrapper === null) {\n      return;\n    }\n\n    dom.addEvent(this.pageWrapper, 'click', this.enableButtonId, () => {\n      this.sendRequest(this.enableAction);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  sendRequest(action) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // Reload current page if successful.\n      if ('undefined' !== typeof (data.success) && data.success) {\n        location.reload();\n        return;\n      }\n\n      // There will be message probably in case of error\n      if ('undefined' !== typeof (data.message)) {\n        this.notyf.error(data.message);\n        return;\n      }\n\n      this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Fetch directory direct child directories\n */\nexport default class WpstgDirectoryNavigation {\n  constructor(\n      directoryListingSelector = '#wpstg-directories-listing',\n      wpstgObject = wpstg,\n      notyf = null,\n  ) {\n    this.directoryListingContainer = dom.qs(directoryListingSelector);\n    this.wpstgObject = wpstgObject;\n    this.dirCheckboxSelector = '.wpstg-check-dir';\n    this.dirExpandSelector = '.wpstg-expand-dirs';\n    this.unselectAllDirsSelector = '.wpstg-unselect-dirs';\n    this.selectDefaultDirsSelector = '.wpstg-select-dirs-default';\n    this.fetchChildrenAction = 'wpstg_fetch_dir_childrens';\n    this.currentCheckboxElement = null;\n    this.currentParentDiv = null;\n    this.currentLoader = null;\n    this.existingExcludes = [];\n    this.excludedDirectories = [];\n    this.isDefaultSelected = false;\n    this.notyf = notyf;\n\n    this.init();\n  }\n\n  addEvents() {\n    if (this.directoryListingContainer === null) {\n      console.log('Error: directory navigation add events');\n      return;\n    }\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.dirExpandSelector, (element, event) => {\n      event.preventDefault();\n      if (this.toggleDirExpand(element)) {\n        this.sendRequest(this.fetchChildrenAction, element);\n      }\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.unselectAllDirsSelector, () => {\n      this.unselectAll();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.selectDefaultDirsSelector, () => {\n      this.selectDefault();\n    });\n  }\n\n  init() {\n    this.addEvents();\n    this.parseExcludes();\n  }\n\n  /**\n   * Toggle Dir Expand,\n   * Return true if children aren't fetched\n   * @param {HTMLElement} element\n   * @return {boolean}\n   */\n  toggleDirExpand(element) {\n    this.currentParentDiv = element.parentElement;\n    this.currentCheckboxElement = element.previousSibling;\n    this.currentLoader = this.currentParentDiv.querySelector('.wpstg-is-dir-loading');\n    if (this.currentCheckboxElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return false;\n    }\n\n    if (this.currentCheckboxElement.getAttribute('data-scanned', 'false') === 'false') {\n      return true;\n    }\n\n    return false;\n  }\n\n  sendRequest(action) {\n    if (this.currentLoader !== null) {\n      this.currentLoader.style.display = 'inline-block';\n    }\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        dirPath: this.currentCheckboxElement.value,\n        isChecked: this.currentCheckboxElement.checked,\n        forceDefault: this.isDefaultSelected,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.currentCheckboxElement.setAttribute('data-scanned', true);\n        const dirContainer = document.createElement('div');\n        dirContainer.classList.add('wpstg-dir');\n        dirContainer.classList.add('wpstg-subdir');\n        dirContainer.innerHTML = JSON.parse(data.directoryListing);\n        this.currentParentDiv.appendChild(dirContainer);\n        if (this.currentLoader !== null) {\n          this.currentLoader.style.display = 'none';\n        }\n\n        dom.slideDown(dirContainer);\n\n        return;\n      }\n\n      if (this.notyf !== null) {\n        this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n      } else {\n        alert('Error: ' + this.wpstgObject.i18n['somethingWentWrong']);\n      }\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n\n  getExcludedDirectories() {\n    this.excludedDirectories = [];\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input:not(:checked)').forEach((element) => {\n      if (!this.isParentExcluded(element.value)) {\n        this.excludedDirectories.push(element.value);\n      }\n    });\n\n    this.existingExcludes.forEach((exclude) => {\n      if (!this.isParentExcluded(exclude) && !this.isExcludeScanned(exclude)) {\n        this.excludedDirectories.push(exclude);\n      }\n    });\n\n    return this.excludedDirectories.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  /**\n   * @param {string} path\n   * @return {bool}\n   */\n  isParentExcluded(path) {\n    let isParentAlreadyExcluded = false;\n    this.excludedDirectories.forEach((dir) => {\n      if (path.startsWith(dir + '/')) {\n        isParentAlreadyExcluded = true;\n      }\n    });\n\n    return isParentAlreadyExcluded;\n  }\n\n  getExtraDirectoriesRootOnly() {\n    this.getExcludedDirectories();\n    const extraDirectories = [];\n    this.directoryListingContainer.querySelectorAll(':not(.wpstg-subdir)>.wpstg-dir>input.wpstg-wp-non-core-dir:checked').forEach((element) => {\n      extraDirectories.push(element.value);\n    });\n\n    // Check if extra directories text area exists\n    // TODO: remove extraCustomDirectories code if no one require extraCustomDirectories...\n    const extraDirectoriesTextArea = dom.qs('#wpstg_extraDirectories');\n    if (extraDirectoriesTextArea === null || extraDirectoriesTextArea.value === '') {\n      return extraDirectories.join(this.wpstgObject.settings.directorySeparator);\n    }\n\n    const extraCustomDirectories = extraDirectoriesTextArea.value.split(/\\r?\\n/);\n\n    return extraDirectories.concat(extraCustomDirectories).join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  unselectAll() {\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input').forEach((element) => {\n      element.checked = false;\n    });\n  }\n\n  selectDefault() {\n    // unselect all checkboxes\n    this.unselectAll();\n\n    // only select those checkboxes whose class is wpstg-wp-core-dir\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input.wpstg-wp-core-dir').forEach((element) => {\n      element.checked = true;\n    });\n\n    // then unselect those checkboxes whose parent has wpstg extra checkbox\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir > .wpstg-wp-non-core-dir').forEach((element) => {\n      element.parentElement.querySelectorAll('input.wpstg-wp-core-dir').forEach((element) => {\n        element.checked = false;\n      });\n    });\n\n    this.isDefaultSelected = true;\n  }\n\n  parseExcludes() {\n    this.existingExcludes = this.directoryListingContainer.getAttribute('data-existing-excludes', []);\n    if (this.existingExcludes === '') {\n      this.existingExcludes = [];\n    }\n\n    if (this.existingExcludes.length !== 0) {\n      this.existingExcludes = this.existingExcludes.split(',');\n    }\n  }\n\n  isExcludeScanned(exclude) {\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input').forEach((element) => {\n      if (element.value === exclude) {\n        return true;\n      }\n    });\n\n    return false;\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Rich Exclude Filter Module\n */\nexport default class WpstgExcludeFilters {\n  constructor(\n      excludeFilterContainerSelector = '#wpstg-exclude-filters-container',\n      wpstgObject = wpstg,\n  ) {\n    this.excludeContainer = dom.qs(excludeFilterContainerSelector);\n    this.excludeTableBody = dom.qs(`${excludeFilterContainerSelector} tbody`);\n    this.wpstgObject = wpstgObject;\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-size-rule', () => {\n      this.addFileSizeExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-ext-rule', () => {\n      this.addFileExtExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-name-rule', () => {\n      this.addFileNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-dir-name-rule', () => {\n      this.addDirNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-clear-all-rules', () => {\n      this.clearExcludes();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-remove-exclude-rule', (target) => {\n      this.removeExclude(target);\n    });\n  }\n\n  init() {\n    if (this.excludeContainer === null) {\n      console.log('Error: Given table selector not found!');\n      return;\n    }\n\n    this.addEvents();\n  }\n\n  addFileSizeExclude() {\n    this.addExcludeRuleRow('#wpstg-file-size-exclude-filter-template');\n  }\n\n  addFileExtExclude() {\n    this.addExcludeRuleRow('#wpstg-file-ext-exclude-filter-template');\n  }\n\n  addFileNameExclude() {\n    this.addExcludeRuleRow('#wpstg-file-name-exclude-filter-template');\n  }\n\n  addDirNameExclude() {\n    this.addExcludeRuleRow('#wpstg-dir-name-exclude-filter-template');\n  }\n\n  addExcludeRuleRow(templateName) {\n    const excludeRowTemplate = dom.qs(templateName);\n    if (excludeRowTemplate !== null) {\n      const clone = excludeRowTemplate.content.cloneNode(true);\n      const excludeRow = clone.querySelector('tr');\n\n      this.excludeTableBody.appendChild(excludeRow);\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'inherit';\n      });\n    }\n  }\n\n  clearExcludes() {\n    this.excludeTableBody.innerHTML = '';\n    dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n      e.style.display = 'none';\n    });\n  }\n\n  removeExclude(target) {\n    if (target.parentElement !== null && target.parentElement.parentElement !== null) {\n      this.excludeTableBody.removeChild(target.parentElement.parentElement);\n    }\n\n    if (this.excludeTableBody.innerHTML.trim() === '') {\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'none';\n      });\n    }\n  }\n\n  /**\n   * Converts all the exclude filters arrays into one single string to keep size of post request small\n   * @return {string}\n   */\n  getExcludeFilters() {\n    const globExcludes = [];\n    const sizeExcludes = [];\n\n    const sizeCompares = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleCompare[]\"]');\n    const sizeSizes = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileSizeExcludeRuleSize[]\"]');\n    const sizeByte = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleByte[]\"]');\n    for (const [key, sizeInput] of Object.entries(sizeSizes)) {\n      if (sizeInput.value !== '') {\n        sizeExcludes.push(sizeCompares[key].value + ' ' + sizeInput.value + sizeByte[key].value);\n      }\n    }\n\n    const extensionInputs = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileExtExcludeRule[]\"]');\n    extensionInputs.forEach((x) => {\n      const ext = this.cleanStringForGlob(x.value);\n      if (ext !== '') {\n        globExcludes.push('ext:' + ext.trim());\n      }\n    });\n\n    const fileNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileNameExcludeRulePos[]\"]');\n    const fileNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileNameExcludeRulePath[]\"]');\n    for (const [key, fileInput] of Object.entries(fileNames)) {\n      const fileName = this.cleanStringForGlob(fileInput.value);\n      if (fileName !== '') {\n        globExcludes.push('file:' + fileNamesPos[key].value + ' ' + fileName.trim());\n      }\n    }\n\n    const dirNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgDirNameExcludeRulePos[]\"]');\n    const dirNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgDirNameExcludeRulePath[]\"]');\n    for (const [key, dirInput] of Object.entries(dirNames)) {\n      const dirName = this.cleanStringForGlob(dirInput.value);\n      if (dirName !== '') {\n        globExcludes.push('dir:' + dirNamesPos[key].value + ' ' + dirName.trim());\n      }\n    }\n\n    return {\n      'sizes': sizeExcludes.filter(this.onlyUnique).join(','),\n      // return set of unique rules\n      'globs': globExcludes.filter(this.onlyUnique).join(','),\n    };\n  }\n\n  onlyUnique(value, index, self) {\n    return self.indexOf(value) === index;\n  }\n\n  /**\n   * Remove most of the comment glob characters from the string\n   * @param {String} value\n   * @return {String}\n   */\n  cleanStringForGlob(value) {\n    // will replace character like * ^ / \\ ! ? [ from the string\n    return value.replace(/[*^//!\\.[?]/g, '');\n  }\n}\n","/**\n * Basic WP Staging Modal implemented with help of Sweetalerts\n */\nexport default class WpstgModal {\n  constructor(\n      confirmAction,\n      wpstgObject = wpstg,\n  ) {\n    this.confirmAction = confirmAction;\n    this.wpstgObject = wpstgObject;\n  }\n\n  show(swalOptions, additionalParams = {}, callback = null) {\n    Swal.fire(swalOptions).then((result) => {\n      if (result.value && this.error !== null) {\n        this.triggerConfirmAction(additionalParams, callback);\n      }\n    });\n  }\n\n  triggerConfirmAction(additionalParams = {}, callback = null) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams(Object.assign({\n        action: this.confirmAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }, additionalParams)),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((response) => {\n      if (callback !== null) {\n        callback(response);\n      }\n    }).catch((error) => {\n      console.log(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","\nimport * as dom from './wpstg-dom-utils.js';\nimport WpstgDirectoryNavigation from './wpstg-directory-navigation.js';\nimport WpstgExcludeFilters from './wpstg-exclude-filters.js';\nimport WpstgModal from './wpstg-modal.js';\n\n/**\n * Manage RESET MODAL\n */\nexport default class WpstgResetModal {\n  constructor(\n      cloneID,\n      workflowSelector = '#wpstg-workflow',\n      fetchExcludeSettingsAction = 'wpstg_clone_excludes_settings',\n      modalErrorAction = 'wpstg_modal_error',\n      wpstgObject = wpstg,\n  ) {\n    this.cloneID = cloneID;\n    this.workflow = dom.qs(workflowSelector);\n    this.wpstgObject = wpstgObject;\n    this.fetchExcludeSettingsAction = fetchExcludeSettingsAction;\n    this.modalErrorAction = modalErrorAction;\n    this.resetButtonClass = 'wpstg-confirm-reset-clone';\n    this.resetModalContainerClass = 'wpstg-reset-confirmation';\n    this.resetTabSelector = '.wpstg-reset-exclude-tab';\n    this.directoryNavigator = null;\n    this.excludeFilters = null;\n    this.isAllTablesChecked = true;\n  }\n\n  addEvents() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (resetModalContainer === null) {\n      console.log('Exit');\n      return;\n    }\n\n    dom.addEvent(resetModalContainer, 'click', this.resetTabSelector, (target) => {\n      this.toggleContent(target);\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-button-select', () => {\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-button-unselect', () => {\n      this.toggleTableSelection();\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-expand-dirs', (target, event) => {\n      event.preventDefault();\n      this.toggleDirectoryNavigation(target);\n    });\n\n    dom.addEvent(resetModalContainer, 'change', 'input.wpstg-check-dir', (target) => {\n      this.updateDirectorySelection(target);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  toggleContent(target) {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const contentId = target.getAttribute('data-id');\n    const tabTriangle = target.querySelector('.wpstg-tab-triangle');\n    const isCollapsed = target.getAttribute('data-collapsed', 'true');\n    const content = dom.qs(contentId);\n    if (isCollapsed === 'true') {\n      if (resetModalContainer.classList.contains('has-collapsible-open')) {\n        resetModalContainer.classList.add('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.add('has-collapsible-open');\n      }\n\n      dom.slideDown(content);\n      tabTriangle.style.transform = 'rotate(90deg)';\n      target.setAttribute('data-collapsed', 'false');\n    } else {\n      if (resetModalContainer.classList.contains('has-collapsible-open-2')) {\n        resetModalContainer.classList.remove('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.remove('has-collapsible-open');\n      }\n\n      dom.slideUp(content);\n      tabTriangle.style.removeProperty('transform');\n      target.setAttribute('data-collapsed', 'true');\n    }\n  }\n\n  /**\n   * Show Swal alert with loader and send ajax request to fetch content of alert.\n   * @return Promise\n   */\n  showModal() {\n    const swalPromise = this.loadModal();\n    this.init();\n    this.fetchCloneExcludes();\n    return swalPromise;\n  }\n\n  loadModal() {\n    return Swal.fire({\n      title: '',\n      icon: 'warning',\n      html: this.getAjaxLoader(),\n      width: '300px',\n      focusConfirm: false,\n      customClass: {\n        confirmButton: this.resetButtonClass,\n        container: 'wpstg-swal2-container wpstg-swal2-loading ' + this.resetModalContainerClass,\n      },\n      confirmButtonText: this.wpstgObject.i18n.resetClone,\n      showCancelButton: true,\n    });\n  }\n\n  fetchCloneExcludes() {\n    this.error = null;\n    // send ajax request and fetch preserved exclude settings\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.fetchExcludeSettingsAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        clone: this.cloneID,\n        job: 'resetting',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if (!data.success) {\n        const errorModal = new WpstgModal(this.modalErrorAction, this.wpstgObject);\n        errorModal.show(Object.assign({\n          title: 'Error',\n          icon: 'error',\n          html: this.wpstgObject.i18n['somethingWentWrong'],\n          width: '500px',\n          confirmButtonText: 'Ok',\n          showCancelButton: false,\n        }, data.swalOptions), {\n          type: data.type,\n        });\n\n        return;\n      }\n\n      const modal = dom.qs('.wpstg-reset-confirmation');\n      modal.classList.remove('wpstg-swal2-loading');\n      modal.querySelector('.swal2-popup').style.width = 'auto';\n      modal.querySelector('.swal2-content').innerHTML = data.html;\n      this.directoryNavigator = new WpstgDirectoryNavigation();\n      this.excludeFilters = new WpstgExcludeFilters();\n    }).catch((error) => {\n      this.renderError({\n        'html': this.wpstgObject.i18n['somethingWentWrong'] + ' ' + error,\n      });\n    });\n  }\n\n  getDirectoryNavigator() {\n    return this.directoryNavigator;\n  }\n\n  getExcludeFilters() {\n    return this.excludeFilters;\n  }\n\n  getAjaxLoader() {\n    return '<div class=\"wpstg-swal2-ajax-loader\"><img src=\"' + this.wpstgObject.wpstgIcon + '\" /></div>';\n  }\n\n  toggleDirectoryNavigation(element) {\n    const cbElement = element.previousSibling;\n    if (cbElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return;\n    }\n\n    if (cbElement.getAttribute('data-scanned', 'false') === 'false') {\n      return;\n    }\n\n    const subDirectories = dom.getNextSibling(element, '.wpstg-subdir');\n\n    if (subDirectories.style.display === 'none') {\n      dom.slideDown(subDirectories);\n    } else {\n      dom.slideUp(subDirectories);\n    }\n  }\n\n  updateDirectorySelection(element) {\n    const parent = element.parentElement;\n    if (element.checked) {\n      dom.getParents(parent, '.wpstg-dir').forEach((parElem) => {\n        for (let i = 0; i < parElem.children.length; i++) {\n          if (parElem.children[i].matches('.wpstg-check-dir')) {\n            parElem.children[i].checked = true;\n          }\n        }\n      });\n      parent.querySelectorAll('.wpstg-expand-dirs').forEach((x) => {\n        x.classList.remove('disabled');\n      });\n      parent.querySelectorAll('.wpstg-subdir .wpstg-check-dir').forEach((x) => {\n        x.checked = true;\n      });\n    } else {\n      parent.querySelectorAll('.wpstg-expand-dirs, .wpstg-check-subdirs').forEach((x) => {\n        x.classList.add('disabled');\n      });\n      parent.querySelectorAll('.wpstg-dir .wpstg-check-dir').forEach((x) => {\n        x.checked = false;\n      });\n    }\n  }\n\n  selectDefaultTables() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const options = resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table');\n    const multisitePattern = '^' + this.wpstgObject.tblprefix + '([^0-9])_*';\n    const singleSitePattern = '^' + this.wpstgObject.tblprefix;\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (this.wpstgObject.isMultisite === '1' && name.match(multisitePattern)) {\n        option.setAttribute('selected', 'selected');\n      } else if (this.wpstgObject.isMultisite === '' && name.match(singleSitePattern)) {\n        option.setAttribute('selected', 'selected');\n      } else {\n        option.removeAttribute('selected');\n      }\n    });\n  }\n\n  toggleTableSelection() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (false === this.isAllTablesChecked) {\n      resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.setAttribute('selected', 'selected');\n      });\n      resetModalContainer.querySelector('.wpstg-button-unselect').innerHTML = 'Unselect All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n      this.isAllTablesChecked = true;\n    } else {\n      resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.removeAttribute('selected');\n      });\n      resetModalContainer.querySelector('.wpstg-button-unselect').innerHTML = 'Select All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n      this.isAllTablesChecked = false;\n    }\n  }\n}\n","import WpstgCloneStaging from './modules/wpstg-clone-staging.js';\nimport WpstgDirectoryNavigation from './modules/wpstg-directory-navigation.js';\nimport WpstgExcludeFilters from './modules/wpstg-exclude-filters.js';\nimport WpstgResetModal from './modules/wpstg-reset-modal.js';\nimport WpstgModal from './modules/wpstg-modal.js';\n\nvar WPStaging = (function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n    time: 1,\n    executionTime: false,\n    progressBar: 0,\n    cloneExcludeFilters: null,\n    directoryNavigator: null,\n    notyf: new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    }),\n  };\n  const cache = {elements: []};\n  let timeout; let ajaxSpinner;\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n  /**\n     * Show and Log Error Message\n     * @param {String} message\n     */\n  const showError = function(message) {\n    cache.get('#wpstg-try-again').css('display', 'inline-block');\n    cache.get('#wpstg-cancel-cloning').text('Reset');\n    cache.get('#wpstg-resume-cloning').show();\n    cache.get('#wpstg-error-wrapper').show();\n    cache.get('#wpstg-error-details').show().html(message);\n    cache.get('#wpstg-removing-clone').removeClass('loading');\n    cache.get('.wpstg-loader').hide();\n    $('.wpstg--modal--process--generic-problem').show().html(message);\n  };\n\n  /**\n   * Show warning during cloning or push process when closing tab or browser, or changing page\n   * @param {beforeunload} event\n   * @return {null}\n   */\n  that.warnIfClosingDuringProcess = function(event) {\n    // Only some browsers show the message below, most say something like \"Changes you made may not be saved\" (Chrome) or \"You have unsaved changes. Exit?\"\n    event.returnValue = 'You MUST leave this window open while cloning/pushing. Please wait...';\n    return null;\n  };\n\n  /**\n     *\n     * @param obj\n     * @return {boolean}\n     */\n  function isEmpty(obj) {\n    for (const prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n     *\n     * @param response the error object\n     * @param prependMessage Overwrite default error message at beginning\n     * @param appendMessage Overwrite default error message at end\n     * @returns void\n     */\n\n  const showAjaxFatalError = function(response, prependMessage, appendMessage) {\n    prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n    appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n    if (response === false) {\n      showError(prependMessage + ' Error: No response.' + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n\n    if (typeof response.error !== 'undefined' && response.error) {\n      console.error(response.message);\n      showError(prependMessage + ' Error: ' + response.message + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n  };\n\n  /**\n     *\n     * @param response\n     * @return {{ok}|*}\n     */\n  const handleFetchErrors = function(response) {\n    if (!response.ok) {\n      showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n    }\n    return response;\n  };\n\n  /** Hide and reset previous thrown visible errors */\n  const resetErrors = function() {\n    cache.get('#wpstg-error-details').hide().html('');\n  };\n\n  const slugify = function(url) {\n    return url.toString()\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .replace(/\\s+/g, '-')\n        .replace(/&/g, '-and-')\n        .replace(/[^a-z0-9\\-]/g, '')\n        .replace(/-+/g, '-')\n        .replace(/^-*/, '')\n        .replace(/-*$/, '')\n    ;\n  };\n\n\n  /**\n     * Common Elements\n     */\n  const elements = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    let isAllChecked = true;\n    let urlSpinner = ajaxurl.replace('/admin-ajax.php', '') + '/images/spinner';\n    let timer;\n\n    if (2 < window.devicePixelRatio) {\n      urlSpinner += '-2x';\n    }\n\n    urlSpinner += '.gif';\n\n    ajaxSpinner = '<img src=\\'\\'' + urlSpinner + '\\' alt=\\'\\' class=\\'ajax-spinner general-spinner\\' />';\n\n    const getBaseValues = function() {\n      const path = $('#wpstg-use-target-dir').data('base-path');\n      const uri = $('#wpstg-use-target-hostname').data('base-uri');\n      return {\n        path,\n      };\n    };\n\n    $workFlow\n    // Check / Un-check All Database Tables New\n        .on('click', '.wpstg-button-unselect', function(e) {\n          e.preventDefault();\n\n          if (false === isAllChecked) {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', 'selected');\n            cache.get('.wpstg-button-unselect').text('Unselect All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n            isAllChecked = true;\n          } else {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', false);\n            cache.get('.wpstg-button-unselect').text('Select All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n            isAllChecked = false;\n          }\n        })\n\n    /**\n             * Select tables with certain tbl prefix | NEW\n             * @param obj e\n             * @returns {undefined}\n             */\n        .on('click', '.wpstg-button-select', function(e) {\n          e.preventDefault();\n          $('#wpstg_select_tables_cloning .wpstg-db-table').each(function() {\n            if (wpstg.isMultisite == 1) {\n              if ($(this).attr('name').match('^' + wpstg.tblprefix + '([^0-9])_*')) {\n                $(this).prop('selected', 'selected');\n              } else {\n                $(this).prop('selected', false);\n              }\n            }\n\n            if (wpstg.isMultisite == 0) {\n              if ($(this).attr('name').match('^' + wpstg.tblprefix)) {\n                $(this).prop('selected', 'selected');\n              } else {\n                $(this).prop('selected', false);\n              }\n            }\n          });\n        })\n    // Expand Directories\n        .on('click', '.wpstg-expand-dirs', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          $this.siblings('.wpstg-subdir').slideToggle();\n        })\n    // When a directory checkbox is Selected\n        .on('change', 'input.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // When a directory name is Selected\n        .on('change', 'href.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // Check the max length of the clone name and if the clone name already exists\n        .on('keyup', '#wpstg-new-clone-id', function() {\n          // Hide previous errors\n          document.getElementById('wpstg-error-details').style.display = 'none';\n\n          // This request was already sent, clear it up!\n          if ('number' === typeof (timer)) {\n            clearInterval(timer);\n          }\n\n          const cloneID = this.value;\n\n          timer = setTimeout(\n              function() {\n                ajax(\n                    {\n                      action: 'wpstg_check_clone',\n                      accessToken: wpstg.accessToken,\n                      nonce: wpstg.nonce,\n                      cloneID: cloneID,\n                    },\n                    function(response) {\n                      if (response.status === 'success') {\n                        cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').removeAttr('disabled');\n                        cache.get('#wpstg-clone-id-error').text('').hide();\n                      } else {\n                        cache.get('#wpstg-new-clone-id').addClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').prop('disabled', true);\n                        cache.get('#wpstg-clone-id-error').text(response.message).show();\n                      }\n                    },\n                );\n              },\n              500,\n          );\n        })\n    // Restart cloning process\n        .on('click', '#wpstg-start-cloning', function() {\n          resetErrors();\n          that.isCancelled = false;\n          that.getLogs = false;\n          that.progressBar = 0;\n        })\n        .on('input', '#wpstg-new-clone-id', function() {\n          if ($('#wpstg-clone-directory').length < 1) {\n            return;\n          }\n\n          const slug = slugify(this.value);\n          const $targetDir = $('#wpstg-use-target-dir');\n          const $targetUri = $('#wpstg-use-target-hostname');\n          let path = $targetDir.data('base-path');\n          let uri = $targetUri.data('base-uri');\n\n          if (path) {\n            path = path.replace(/\\/+$/g, '') + '/' + slug + '/';\n          }\n\n          if (uri) {\n            uri = uri.replace(/\\/+$/g, '') + '/' + slug;\n          }\n\n\n          $('.wpstg-use-target-dir--value').text(path);\n          $('.wpstg-use-target-hostname--value').text(uri);\n\n          $targetDir.attr('data-path', path);\n          $targetUri.attr('data-uri', uri);\n          $('#wpstg_clone_dir').attr('placeholder', path);\n          $('#wpstg_clone_hostname').attr('placeholder', uri);\n        })\n        .on('input', '#wpstg_clone_hostname', function() {\n          if ($(this).val() === '' || validateTargetHost()) {\n            $('#wpstg_clone_hostname_error').remove();\n            return;\n          }\n          if (!validateTargetHost() && !$('#wpstg_clone_hostname_error').length) {\n            $('#wpstg-clone-directory tr:last-of-type').after('<tr><td>&nbsp;</td><td><p id=\"wpstg_clone_hostname_error\" style=\"color: red;\">&nbsp;Invalid host name. Please provide it in a format like http://example.com</p></td></tr>');\n          }\n        })\n    ;\n\n    cloneActions();\n  };\n\n  /* @returns {boolean} */\n  var validateTargetHost = function() {\n    const the_domain = $('#wpstg_clone_hostname').val();\n\n    if (the_domain === '') {\n      return true;\n    }\n\n    const reg = /^http(s)?:\\/\\/.*$/;\n    if (reg.test(the_domain) === false) {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n     * Clone actions\n     */\n  var cloneActions = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Cancel cloning\n        .on('click', '#wpstg-cancel-cloning', function() {\n          if (!confirm('Are you sure you want to cancel cloning process?')) {\n            return false;\n          }\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n          that.progressBar = 0;\n\n          $('#wpstg-processing-status').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloning();\n        })\n    // Resume cloning\n        .on('click', '#wpstg-resume-cloning', function() {\n          resetErrors();\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n\n          that.isCancelled = false;\n\n          $('#wpstg-processing-status').text('Try to resume cloning process...');\n          $('#wpstg-error-details').hide();\n          $('.wpstg-loader').show();\n\n          $this.parent().append(ajaxSpinner);\n\n          that.startCloning();\n        })\n    // Cancel update cloning\n        .on('click', '#wpstg-cancel-cloning-update', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloningUpdate();\n        })\n    // Restart cloning\n        .on('click', '#wpstg-restart-cloning', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          restart();\n        })\n    // Delete clone - confirmation\n        .on('click', '.wpstg-remove-clone[data-clone]', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          const $existingClones = cache.get('#wpstg-existing-clones');\n\n          $workFlow.removeClass('active');\n\n          cache.get('.wpstg-loader').show();\n\n          ajax(\n              {\n                action: 'wpstg_confirm_delete_clone',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                clone: $(this).data('clone'),\n              },\n              function(response) {\n                cache.get('#wpstg-removing-clone').html(response);\n\n                $existingClones.children('img').remove();\n\n                cache.get('.wpstg-loader').hide();\n\n                $('html, body').animate({\n                  // This logic is meant to be a \"scrollBottom\"\n                  scrollTop: $('#wpstg-remove-clone').offset().top - $(window).height() +\n                                $('#wpstg-remove-clone').height() + 50,\n                }, 100);\n              },\n              'HTML',\n          );\n        })\n    // Delete clone - confirmed\n        .on('click', '#wpstg-remove-clone', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          cache.get('#wpstg-removing-clone').addClass('loading');\n\n          cache.get('.wpstg-loader').show();\n\n          deleteClone($(this).data('clone'));\n        })\n    // Cancel deleting clone\n        .on('click', '#wpstg-cancel-removing', function(e) {\n          e.preventDefault();\n          $('.wpstg-clone').removeClass('active');\n          cache.get('#wpstg-removing-clone').html('');\n        })\n    // Update\n        .on('click', '.wpstg-execute-clone', function(e) {\n          e.preventDefault();\n\n          const clone = $(this).data('clone');\n\n          $workFlow.addClass('loading');\n          that.cloneExcludeFilters = null;\n          ajax(\n              {\n                action: 'wpstg_scanning',\n                clone: clone,\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n              },\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! Error: No response.  Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n                  );\n                }\n\n                const jsonResponse = tryParseJson(response);\n                if (jsonResponse !== false && jsonResponse.success === false) {\n                  $workFlow.removeClass('loading');\n                  showErrorModal(jsonResponse);\n\n                  return;\n                }\n\n                $workFlow.removeClass('loading').html(response);\n                // register check disk space function for clone update process.\n                checkDiskSpace();\n                that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n                that.cloneExcludeFilters = new WpstgExcludeFilters();\n                that.switchStep(2);\n              },\n              'HTML',\n          );\n        })\n    // Reset Clone\n        .on('click', '.wpstg-reset-clone', function(e) {\n          e.preventDefault();\n          const clone = $(this).data('clone');\n          const resetModal = new WpstgResetModal(clone);\n          const promise = resetModal.showModal();\n\n          promise.then((result) => {\n            if (result.value) {\n              const dirNavigator = resetModal.getDirectoryNavigator();\n              const exclFilters = resetModal.getExcludeFilters().getExcludeFilters();\n              resetClone(clone, {\n                includedTables: getIncludedTables(),\n                excludeSizeRules: encodeURIComponent(exclFilters.sizes),\n                excludeGlobRules: encodeURIComponent(exclFilters.globs),\n                excludedDirectories: dirNavigator.getExcludedDirectories(),\n                extraDirectories: dirNavigator.getExtraDirectoriesRootOnly(),\n              });\n            }\n          });\n\n          return;\n        });\n  };\n\n  /**\n   * Ajax Requests\n   * @param Object data\n   * @param Function callback\n   * @param string dataType\n   * @param bool showErrors\n   * @param int tryCount\n   * @param float incrementRatio\n   */\n  var ajax = function(data, callback, dataType, showErrors, tryCount, incrementRatio = null) {\n    if ('undefined' === typeof (dataType)) {\n      dataType = 'json';\n    }\n\n    if (false !== showErrors) {\n      showErrors = true;\n    }\n\n    tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n    const retryLimit = 10;\n\n    let retryTimeout = 10000 * tryCount;\n\n    incrementRatio = parseInt(incrementRatio);\n    if (!isNaN(incrementRatio)) {\n      retryTimeout *= incrementRatio;\n    }\n\n    $.ajax({\n      url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n      type: 'POST',\n      dataType: dataType,\n      cache: false,\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        // try again after 10 seconds\n        tryCount++;\n        if (tryCount <= retryLimit) {\n          setTimeout(function() {\n            ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n            return;\n          }, retryTimeout);\n        } else {\n          const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n          showError(\n              'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n          );\n        }\n      },\n      success: function(data) {\n        if ('function' === typeof (callback)) {\n          callback(data);\n        }\n      },\n      statusCode: {\n        404: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n          }\n        },\n        500: function() {\n          if (tryCount >= retryLimit) {\n            showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n          }\n        },\n        504: function() {\n          if (tryCount > retryLimit) {\n            showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        502: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        503: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        429: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        403: function() {\n          if (tryCount >= retryLimit) {\n            showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n          }\n        },\n      },\n    });\n  };\n\n  /**\n   * Next / Previous Step Clicks to Navigate Through Staging Job\n   */\n  const stepButtons = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Next Button\n        .on('click', '.wpstg-next-step-link', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n          const isScan = false;\n\n          if ($('#wpstg_clone_hostname').length && !validateTargetHost()) {\n            $('#wpstg_clone_hostname').focus();\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_update' || $this.data('action') === 'wpstg_reset') {\n          // Update / Reset Clone - confirmed\n            let onlyUpdateMessage = '';\n            if ($this.data('action') === 'wpstg_update') {\n              onlyUpdateMessage = ' \\n\\nExclude all tables and folders you do not want to overwrite, first! \\n\\nDo not cancel the updating process! This can break your staging site. \\n\\n\\Create a backup of your staging website before you proceed.';\n            }\n\n            if (!confirm('STOP! This will overwrite your staging site with all selected data from the production site! This should be used only if you want to clone again your production site. Are you sure you want to do this?' + onlyUpdateMessage)) {\n              return false;\n            }\n          }\n\n          // Button is disabled\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_cloning') {\n          // Verify External Database If Checked and Not Skipped\n            if ($('#wpstg-ext-db').is(':checked')) {\n              verifyExternalDatabase($this, $workFlow);\n              return;\n            }\n          }\n\n          proceedCloning($this, $workFlow);\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          cache.get('.wpstg-loader').removeClass('wpstg-finished');\n          cache.get('.wpstg-loader').hide();\n          loadOverview();\n        });\n  };\n\n  /**\n   * Get Included (Checked) Database Tables\n   * @return {Array}\n   */\n  const getIncludedTables = function() {\n    const includedTables = [];\n\n    $('#wpstg_select_tables_cloning option:selected').each(function() {\n      includedTables.push(this.value);\n    });\n\n    return includedTables;\n  };\n\n  /**\n   * Get Excluded (Unchecked) Database Tables\n   * Not used anymore!\n   * @return {Array}\n   */\n  const getExcludedTables = function() {\n    const excludedTables = [];\n\n    $('.wpstg-db-table input:not(:checked)').each(function() {\n      excludedTables.push(this.name);\n    });\n\n    return excludedTables;\n  };\n\n  /**\n   * Verify External Database for Cloning\n   */\n  var verifyExternalDatabase = function($this, workflow) {\n    cache.get('.wpstg-loader').show();\n    ajax(\n        {\n          action: 'wpstg_database_verification',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          databaseUser: cache.get('#wpstg_db_username').val(),\n          databasePassword: cache.get('#wpstg_db_password').val(),\n          databaseServer: cache.get('#wpstg_db_server').val(),\n          databaseDatabase: cache.get('#wpstg_db_database').val(),\n        },\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' === typeof (response.success)) {\n            showError(\n                'Something went wrong! Error: Invalid response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          if (response.success) {\n            cache.get('.wpstg-loader').hide();\n            proceedCloning($this, workflow);\n            return;\n          }\n\n          if (response.error_type === 'comparison') {\n            cache.get('.wpstg-loader').hide();\n            let render = '<table style=\"width: 100%;\"><thead><tr><th>Property</th><th>Production DB</th><th>Staging DB</th><th>Status</th></tr></thead><tbody>';\n            response.checks.forEach((x) => {\n              let icon = '<i style=\"color: #00ff00\">✔</i>';\n              if (x.production !== x.staging) {\n                icon = '<i style=\"color: #ff0000\">❌</i>';\n              }\n              render += '<tr><td>' + x.name + '</td><td>' + x.production + '</td><td>' + x.staging + '</td><td>' + icon + '</td></tr>';\n            });\n            render += '</tbody></table><p>Note: Some mySQL properties do not match. You may proceed but the staging site may not work as expected.</p>';\n            Swal.fire({\n              title: 'Different Database Properties',\n              icon: 'warning',\n              html: render,\n              width: '650px',\n              focusConfirm: false,\n              confirmButtonText: 'Proceed Anyway',\n              showCancelButton: true,\n            }).then(function(result) {\n              if (result.value) {\n                proceedCloning($this, workflow);\n              }\n            });\n            return;\n          }\n\n          Swal.fire({\n            title: 'Different Database Properties',\n            icon: 'error',\n            html: response.message,\n            focusConfirm: true,\n            confirmButtonText: 'Ok',\n            showCancelButton: false,\n          });\n          cache.get('.wpstg-loader').hide();\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n   * Get Cloning Step Data\n   */\n  const getCloningData = function() {\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.data.cloneID = $('#wpstg-new-clone-id').val() || new Date().getTime().toString();\n    // Remove this to keep &_POST[] small otherwise mod_security will throw error 404\n    // that.data.excludedTables = getExcludedTables();\n\n    if (that.directoryNavigator !== null) {\n      that.data.excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      that.data.extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n    }\n\n    that.data.excludeGlobRules = '';\n    that.data.excludeSizeRules = '';\n    if (that.cloneExcludeFilters instanceof WpstgExcludeFilters) {\n      const rules = that.cloneExcludeFilters.getExcludeFilters();\n      that.data.excludeGlobRules = encodeURIComponent(rules.globs);\n      that.data.excludeSizeRules = encodeURIComponent(rules.sizes);\n    }\n\n    that.data.includedTables = getIncludedTables();\n    that.data.databaseServer = $('#wpstg_db_server').val();\n    that.data.databaseUser = $('#wpstg_db_username').val();\n    that.data.databasePassword = $('#wpstg_db_password').val();\n    that.data.databaseDatabase = $('#wpstg_db_database').val();\n    that.data.databasePrefix = $('#wpstg_db_prefix').val();\n    const cloneDir = $('#wpstg_clone_dir').val();\n    that.data.cloneDir = encodeURIComponent($.trim(cloneDir));\n    that.data.cloneHostname = $('#wpstg_clone_hostname').val();\n    that.data.emailsAllowed = $('#wpstg_allow_emails').is(':checked');\n    that.data.uploadsSymlinked = $('#wpstg_symlink_upload').is(':checked');\n    that.data.cleanPluginsThemes = $('#wpstg-clean-plugins-themes').is(':checked');\n    that.data.cleanUploadsDir = $('#wpstg-clean-uploads').is(':checked');\n  };\n\n  var proceedCloning = function($this, workflow) {\n    // Add loading overlay\n    workflow.addClass('loading');\n\n    // Prepare data\n    that.data = {\n      action: $this.data('action'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    // Cloning data\n    getCloningData();\n\n    sendCloningAjax(workflow);\n  };\n\n  var sendCloningAjax = function(workflow) {\n    // Send ajax request\n    ajax(\n        that.data,\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong!<br/><br/> Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n          const jsonResponse = tryParseJson(response);\n          if (jsonResponse !== false && jsonResponse.success === false) {\n            workflow.removeClass('loading');\n            showErrorModal(jsonResponse);\n\n            return;\n          }\n\n          // Styling of elements\n          workflow.removeClass('loading').html(response);\n          that.cloneExcludeFilters = null;\n          if (that.data.action === 'wpstg_scanning') {\n            that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n            that.switchStep(2);\n            that.cloneExcludeFilters = new WpstgExcludeFilters();\n          } else if (that.data.action === 'wpstg_cloning' || that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n            that.switchStep(3);\n          }\n\n          // Start cloning\n          that.startCloning();\n        },\n        'HTML',\n    );\n  };\n\n  var showErrorModal = function(response) {\n    const errorModal = new WpstgModal('wpstg_modal_error', wpstg);\n    errorModal.show(Object.assign({\n      title: 'Error',\n      icon: 'error',\n      html: wpstg.i18n['somethingWentWrong'],\n      width: '500px',\n      confirmButtonText: 'Ok',\n      showCancelButton: false,\n    }, response.swalOptions), {\n      type: response.type,\n    });\n  };\n\n  const tryParseJson = function(json) {\n    // early bail if not string\n    if (!json) {\n      return false;\n    }\n\n    try {\n      const object = JSON.parse(json);\n      if (object && typeof object === 'object') {\n        return object;\n      }\n    } catch (e) {\n      // do nothing on catch\n    }\n\n    return false;\n  };\n\n  var resetClone = function(clone, excludeOptions) {\n    that.data = {\n      action: 'wpstg_reset',\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n      cloneID: clone,\n    };\n\n    that.data = {...that.data, ...excludeOptions};\n\n    const $workFlow = cache.get('#wpstg-workflow');\n    sendCloningAjax($workFlow);\n  };\n\n  /**\n   * Loads Overview (first step) of Staging Job\n   */\n  var loadOverview = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow.addClass('loading');\n\n    ajax(\n        {\n          action: 'wpstg_overview',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response. Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report.',\n            );\n          }\n\n          const $currentStep = cache.get('.wpstg-current-step');\n\n          // Styling of elements\n          $workFlow.removeClass('loading').html(response);\n        },\n        'HTML',\n    );\n\n    that.switchStep(1);\n    cache.get('.wpstg-step3-cloning').show();\n    cache.get('.wpstg-step3-pushing').hide();\n  };\n\n  /**\n   * Load Tabs\n   */\n  const tabs = function() {\n    cache.get('#wpstg-workflow').on('click', '.wpstg-tab-header', function(e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const $section = cache.get($this.data('id'));\n\n      $this.toggleClass('expand');\n\n      $section.slideToggle();\n\n      if ($this.hasClass('expand')) {\n        $this.find('.wpstg-tab-triangle').html('&#9660;');\n      } else {\n        $this.find('.wpstg-tab-triangle').html('&#9658;');\n      }\n    });\n  };\n\n  /**\n   * Delete Clone\n   * @param {String} clone\n   */\n  var deleteClone = function(clone) {\n    const deleteDir = $('#deleteDirectory:checked').data('deletepath');\n\n    ajax(\n        {\n          action: 'wpstg_delete_clone',\n          clone: clone,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          excludedTables: getExcludedTables(),\n          deleteDir: deleteDir,\n        },\n        function(response) {\n          if (response) {\n            showAjaxFatalError(response);\n\n            // Finished\n            if ('undefined' !== typeof response.delete && (response.delete === 'finished' || response.delete === 'unfinished')) {\n              cache.get('#wpstg-removing-clone').removeClass('loading').html('');\n\n              if (response.delete === 'finished') {\n                $('.wpstg-clone#' + clone).remove();\n              }\n\n              if ($('.wpstg-clone').length < 1) {\n                cache.get('#wpstg-existing-clones').find('h3').text('');\n              }\n\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n          }\n          // continue\n          if (true !== response) {\n            deleteClone(clone);\n            return;\n          }\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloning = function() {\n    that.timer('stop');\n\n\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_clone',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n            cache.get('.wpstg-loader').hide();\n            // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloning();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloningUpdate = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_update',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var restart = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_restart',\n          // clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Scroll the window log to bottom\n   * @return void\n   */\n  const logscroll = function() {\n    const $div = cache.get('.wpstg-log-details');\n    if ('undefined' !== typeof ($div[0])) {\n      $div.scrollTop($div[0].scrollHeight);\n    }\n  };\n\n  /**\n   * Append the log to the logging window\n   * @param string log\n   * @return void\n   */\n  const getLogs = function(log) {\n    if (log != null && 'undefined' !== typeof (log)) {\n      if (log.constructor === Array) {\n        $.each(log, function(index, value) {\n          if (value === null) {\n            return;\n          }\n          if (value.type === 'ERROR') {\n            cache.get('.wpstg-log-details').append('<span style=\"color:red;\">[' + value.type + ']</span>-' + '[' + value.date + '] ' + value.message + '</br>');\n          } else {\n            cache.get('.wpstg-log-details').append('[' + value.type + ']-' + '[' + value.date + '] ' + value.message + '</br>');\n          }\n        });\n      } else {\n        cache.get('.wpstg-log-details').append('[' + log.type + ']-' + '[' + log.date + '] ' + log.message + '</br>');\n      }\n    }\n    logscroll();\n  };\n\n  /**\n   * Check diskspace\n   * @return string json\n   */\n  var checkDiskSpace = function() {\n    cache.get('#wpstg-check-space').on('click', function(e) {\n      cache.get('.wpstg-loader').show();\n      const excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      const extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n\n      ajax(\n          {\n            action: 'wpstg_check_disk_space',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedDirectories: excludedDirectories,\n            extraDirectories: extraDirectories,\n          },\n          function(response) {\n            if (false === response) {\n              cache.get('#wpstg-clone-id-error').text('Can not detect required disk space').show();\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n\n            // Show required disk space\n            cache.get('#wpstg-clone-id-error').html('Estimated necessary disk space: ' + response.usedspace + '<br> <span style=\"color:#444;\">Before you proceed ensure your account has enough free disk space to hold the entire instance of the production site. You can check the available space from your hosting account (cPanel or similar).</span>').show();\n            cache.get('.wpstg-loader').hide();\n          },\n          'json',\n          false,\n      );\n    });\n  };\n\n  const mainTabs = function() {\n    $('.wpstg--tab--header a[data-target]').on('click', function() {\n      const $this = $(this);\n      const target = $this.attr('data-target');\n      const $wrapper = $this.parents('.wpstg--tab--wrapper');\n      const $menuItems = $wrapper.find('.wpstg--tab--header a[data-target]');\n      const $contents = $wrapper.find('.wpstg--tab--contents > .wpstg--tab--content');\n\n      $contents.filter('.wpstg--tab--active:not(.wpstg--tab--active' + target + ')').removeClass('wpstg--tab--active');\n      $menuItems.not($this).removeClass('wpstg--tab--active');\n      $this.addClass('wpstg--tab--active');\n      $(target).addClass('wpstg--tab--active');\n\n      if ('#wpstg--tab--backup' === target) {\n        that.backups.init();\n      }\n\n      if ('#wpstg--tab--database-backups' === target) {\n        window.dispatchEvent(new Event('database-backups-tab'));\n      }\n    });\n  };\n\n  /**\n   * Show or hide animated loading icon\n   * @param isLoading bool\n   */\n  const isLoading = function(isLoading) {\n    if (!isLoading || isLoading === false) {\n      cache.get('.wpstg-loader').hide();\n    } else {\n      cache.get('.wpstg-loader').show();\n    }\n  };\n\n  /**\n   * Count up processing execution time\n   * @param string status\n   * @return html\n   */\n  that.timer = function(status) {\n    if (status === 'stop') {\n      const time = that.time;\n      that.time = 1;\n      clearInterval(that.executionTime);\n      return that.convertSeconds(time);\n    }\n\n\n    that.executionTime = setInterval(function() {\n      if (null !== document.getElementById('wpstg-processing-timer')) {\n        document.getElementById('wpstg-processing-timer').innerHTML = 'Elapsed Time: ' + that.convertSeconds(that.time);\n      }\n      that.time++;\n      if (status === 'stop') {\n        that.time = 1;\n        clearInterval(that.executionTime);\n      }\n    }, 1000);\n  };\n\n  /**\n   * Convert seconds to hourly format\n   * @param int seconds\n   * @return string\n   */\n  that.convertSeconds = function(seconds) {\n    const date = new Date(null);\n    date.setSeconds(seconds); // specify value for SECONDS here\n    return date.toISOString().substr(11, 8);\n  };\n\n  /**\n   * Start Cloning Process\n   * @type {Function}\n   */\n  that.startCloning = (function() {\n    resetErrors();\n\n    // Register function for checking disk space\n    checkDiskSpace();\n\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.isCancelled = false;\n\n    // Start the process\n    start();\n\n    // Functions\n    // Start\n    function start() {\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-cancel-cloning').text('Cancel');\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-error-details').hide();\n\n\n      // Clone Database\n      setTimeout(function() {\n        // cloneDatabase();\n        window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        processing();\n      }, wpstg.delayReq);\n\n      that.timer('start');\n    }\n\n\n    /**\n     * Start ajax processing\n     * @return string\n     */\n    var processing = function() {\n      if (true === that.isCancelled) {\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return false;\n      }\n\n      isLoading(true);\n\n      let excludedDirectories = '';\n      let extraDirectories = '';\n      if (that.directoryNavigator !== null) {\n        excludedDirectories = that.directoryNavigator.getExcludedDirectories();\n        extraDirectories = that.directoryNavigator.getExtraDirectoriesRootOnly();\n      }\n\n      // Show logging window\n      cache.get('.wpstg-log-details').show();\n\n      WPStaging.ajax(\n          {\n            action: 'wpstg_processing',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedTables: getExcludedTables(),\n            excludedDirectories: encodeURIComponent(excludedDirectories),\n            extraDirectories: encodeURIComponent(extraDirectories),\n          },\n          function(response) {\n            showAjaxFatalError(response);\n\n            // Add Log messages\n            if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n              getLogs(response.last_msg);\n            }\n            // Continue processing\n            if (false === response.status) {\n              progressBar(response);\n\n              setTimeout(function() {\n                cache.get('.wpstg-loader').show();\n                processing();\n              }, wpstg.delayReq);\n            } else if (true === response.status && 'finished' !== response.status) {\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-error-wrapper').hide();\n              progressBar(response, true);\n              processing();\n            } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n              window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n              finish(response);\n            }\n            ;\n          },\n          'json',\n          false,\n      );\n    };\n\n    // Finish\n    function finish(response) {\n      if (true === that.getLogs) {\n        getLogs();\n      }\n\n      progressBar(response);\n\n      // Add Log\n      if ('undefined' !== typeof (response.last_msg)) {\n        getLogs(response.last_msg);\n      }\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n      $('#wpstg-processing-status').text('Succesfully finished');\n\n      cache.get('#wpstg_staging_name').html(that.data.cloneID);\n      cache.get('#wpstg-finished-result').show();\n      cache.get('#wpstg-cancel-cloning').hide();\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-cancel-cloning-update').prop('disabled', true);\n\n      const $link1 = cache.get('#wpstg-clone-url-1');\n      const $link = cache.get('#wpstg-clone-url');\n      $link1.attr('href', response.url);\n      $link1.html(response.url);\n      $link.attr('href', response.url);\n\n      cache.get('#wpstg-remove-clone').data('clone', that.data.cloneID);\n\n      // Finished\n      that.isFinished = true;\n      that.timer('stop');\n\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n\n      // show alert\n      let msg = wpstg.i18n.cloneResetComplete;\n      if (that.data.action === 'wpstg_update') {\n        msg = wpstg.i18n.cloneUpdateComplete;\n      }\n\n      if (that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n        Swal.fire({\n          title: '',\n          icon: 'success',\n          html: msg,\n          width: '500px',\n          focusConfirm: true,\n        });\n      }\n\n      return false;\n    }\n\n    /**\n     * Add percentage progress bar\n     * @param object response\n     * @return {Boolean}\n     */\n    var progressBar = function(response, restart) {\n      if ('undefined' === typeof (response.percentage)) {\n        return false;\n      }\n\n      if (response.job === 'database') {\n        cache.get('#wpstg-progress-db').width(response.percentage * 0.2 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Cloning Database Tables...');\n      }\n\n      if (response.job === 'SearchReplace') {\n        cache.get('#wpstg-progress-db').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-db').html('1. Database');\n        // Assumption: All previous steps are done.\n        // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n        cache.get('#wpstg-progress-db').width('20%');\n\n        cache.get('#wpstg-progress-sr').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 2 of 4 Preparing Database Data...');\n      }\n\n      if (response.job === 'directories') {\n        cache.get('#wpstg-progress-sr').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-sr').html('2. Data');\n        cache.get('#wpstg-progress-sr').width('10%');\n\n        cache.get('#wpstg-progress-dirs').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 3 of 4 Getting files...');\n      }\n      if (response.job === 'files') {\n        cache.get('#wpstg-progress-dirs').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-dirs').html('3. Files');\n        cache.get('#wpstg-progress-dirs').width('10%');\n\n        cache.get('#wpstg-progress-files').width(response.percentage * 0.6 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Copy files...');\n      }\n      if (response.job === 'finish') {\n        cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-files').html('4. Copy Files');\n        cache.get('#wpstg-progress-files').width('60%');\n\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Cloning Process Finished');\n      }\n    };\n  });\n\n  that.switchStep = function(step) {\n    cache.get('.wpstg-current-step')\n        .removeClass('wpstg-current-step');\n    cache.get('.wpstg-step' + step)\n        .addClass('wpstg-current-step');\n  };\n\n  /**\n   * Initiation\n   * @type {Function}\n   */\n  that.init = (function() {\n    loadOverview();\n    elements();\n    stepButtons();\n    tabs();\n    mainTabs();\n    new WpstgCloneStaging();\n  });\n\n  /**\n   * Ajax call\n   * @type {ajax}\n   */\n  that.ajax = ajax;\n  that.showError = showError;\n  that.getLogs = getLogs;\n  that.loadOverview = loadOverview;\n\n  // TODO RPoC (too big, scattered and unorganized)\n  that.backups = {\n    type: null,\n    isCancelled: false,\n    processInfo: {\n      title: null,\n      interval: null,\n    },\n    modal: {\n      create: {\n        html: null,\n        confirmBtnTxt: null,\n      },\n      process: {\n        html: null,\n        cancelBtnTxt: null,\n        modal: null,\n      },\n      download: {\n        html: null,\n      },\n      import: {\n        html: null,\n        btnTxtNext: null,\n        btnTxtConfirm: null,\n        btnTxtCancel: null,\n        searchReplaceForm: null,\n        file: null,\n        containerUpload: null,\n        containerFilesystem: null,\n        setFile: (file, upload = true) => {\n          const toUnit = (bytes) => {\n            const i = Math.floor(Math.log(bytes) / Math.log(1024));\n            return (bytes / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n          };\n\n          if (!file) {\n            return;\n          }\n\n          that.backups.modal.import.file = file;\n          that.backups.modal.import.data.file = file.name;\n\n          $('.wpstg--backup--import--selected-file').html(`${file.name} <br /> (${toUnit(file.size)})`).show();\n          $('.wpstg--drag').hide();\n          $('.wpstg--drag-or-upload').show();\n\n          if (upload) {\n            $('.wpstg--modal--actions .swal2-confirm').prop('disabled', true);\n            that.backups.upload.start();\n          }\n        },\n        baseDirectory: null,\n        data: {\n          file: null,\n          search: [],\n          replace: [],\n        },\n      },\n    },\n    messages: {\n      WARNING: 'warning',\n      ERROR: 'error',\n      INFO: 'info',\n      DEBUG: 'debug',\n      CRITICAL: 'critical',\n      data: {\n        all: [], // TODO RPoC\n        info: [],\n        error: [],\n        critical: [],\n        warning: [],\n        debug: [],\n      },\n      shouldWarn() {\n        return that.backups.messages.data.error.length > 0 ||\n          that.backups.messages.data.critical.length > 0\n        ;\n      },\n      countByType(type = that.backups.messages.ERROR) {\n        return that.backups.messages.data[type].length;\n      },\n      addMessage(message) {\n        if (Array.isArray(message)) {\n          message.forEach((item) => {\n            that.backups.messages.addMessage(item);\n          });\n          return;\n        }\n        const type = message.type.toLowerCase() || 'info';\n        if (!that.backups.messages.data[type]) {\n          that.backups.messages.data[type] = [];\n        }\n        that.backups.messages.data.all.push(message); // TODO RPoC\n        that.backups.messages.data[type].push(message);\n      },\n      reset() {\n        that.backups.messages.data = {\n          all: [],\n          info: [],\n          error: [],\n          critical: [],\n          warning: [],\n          debug: [],\n        };\n      },\n    },\n    timer: {\n      totalSeconds: 0,\n      interval: null,\n      start() {\n        if (null !== that.backups.timer.interval) {\n          return;\n        }\n\n        const prettify = (seconds) => {\n          // If potentially anything can exceed 24h execution time than that;\n          // const _seconds = parseInt(seconds, 10)\n          // const hours = Math.floor(_seconds / 3600)\n          // const minutes = Math.floor(_seconds / 60) % 60\n          // seconds = _seconds % 60\n          //\n          // return [hours, minutes, seconds]\n          //   .map(v => v < 10 ? '0' + v : v)\n          //   .filter((v,i) => v !== '00' || i > 0)\n          //   .join(':')\n          // ;\n          // Are we sure we won't create anything that exceeds 24h execution time? If not then this;\n          return `${(new Date(seconds * 1000)).toISOString().substr(11, 8)}`;\n        };\n\n        that.backups.timer.interval = setInterval(() => {\n          $('.wpstg--modal--process--elapsed-time').text(prettify(that.backups.timer.totalSeconds));\n          that.backups.timer.totalSeconds++;\n        }, 1000);\n      },\n      stop() {\n        that.backups.timer.totalSeconds = 0;\n        if (that.backups.timer.interval) {\n          clearInterval(that.backups.timer.interval);\n          that.backups.timer.interval = null;\n        }\n      },\n    },\n    upload: {\n      reader: null,\n      file: null,\n      iop: 1000 * 1024,\n      uploadInfo(isShow) {\n        const $containerUpload = $('.wpstg--modal--import--upload--process');\n        const $containerUploader = $('.wpstg--uploader');\n        if (isShow) {\n          $containerUpload.css('display', 'flex');\n          $containerUploader.hide();\n          return;\n        }\n\n        $containerUploader.css('display', 'flex');\n        $containerUpload.hide();\n      },\n      start() {\n        that.backups.upload.reader = new FileReader();\n        that.backups.upload.file = that.backups.modal.import.file;\n        that.backups.upload.uploadInfo(true);\n        that.backups.upload.sendChunk();\n      },\n      sendChunk(startsAt = 0) {\n        if (!that.backups.upload.file) {\n          return;\n        }\n        const isReset = startsAt < 1;\n        const endsAt = startsAt + that.backups.upload.iop + 1;\n        const blob = that.backups.upload.file.slice(startsAt, endsAt);\n        that.backups.upload.reader.onloadend = function(event) {\n          if (event.target.readyState !== FileReader.DONE) {\n            return;\n          }\n\n          const body = new FormData();\n          body.append('accessToken', wpstg.accessToken);\n          body.append('nonce', wpstg.nonce);\n          body.append('data', event.target.result);\n          body.append('filename', that.backups.upload.file.name);\n          body.append('reset', isReset ? '1' : '0');\n\n\n          fetch(`${ajaxurl}?action=wpstg--backups--import--file-upload`, {\n            method: 'POST',\n            body,\n          }).then(handleFetchErrors)\n              .then((res) => res.json())\n              .then((res) => {\n                showAjaxFatalError(res, '', 'Submit an error report.');\n                const writtenBytes = startsAt + that.backups.upload.iop;\n                const percent = Math.floor((writtenBytes / that.backups.upload.file.size) * 100);\n                if (endsAt >= that.backups.upload.file.size) {\n                  that.backups.upload.uploadInfo(false);\n                  isLoading(false);\n                  that.backups.switchModalToConfigure();\n                  return;\n                }\n                $('.wpstg--modal--import--upload--progress--title > span').text(percent);\n                $('.wpstg--modal--import--upload--progress').css('width', `${percent}%`);\n                that.backups.upload.sendChunk(endsAt);\n              })\n              .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n          ;\n        };\n        that.backups.upload.reader.readAsDataURL(blob);\n      },\n    },\n    status: {\n      hasResponse: null,\n      reTryAfter: 5000,\n    },\n    init() {\n      this.create();\n      this.delete();\n      this.edit();\n\n      // noinspection JSIgnoredPromiseFromCall\n      that.backups.fetchListing();\n\n      $('body')\n          .on('click', '.wpstg--backup--download', function() {\n            const url = this.getAttribute('data-url');\n            if (url.length > 0) {\n              window.location.href = url;\n              return;\n            }\n            that.backups.downloadModal({\n              titleExport: this.getAttribute('data-title-export'),\n              title: this.getAttribute('data-title'),\n              id: this.getAttribute('data-id'),\n              btnTxtCancel: this.getAttribute('data-btn-cancel-txt'),\n              btnTxtConfirm: this.getAttribute('data-btn-download-txt'),\n            });\n          })\n          .on('click', '.wpstg--backup--import', function() {\n          // Clicked \"Import\" on the backup list\n            that.backups.importModal();\n            that.backups.modal.import.data.file = this.getAttribute('data-filePath');\n            that.backups.switchModalToConfigure();\n          // $('.wpstg--modal--actions .swal2-confirm').show();\n          // $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n          })\n          .off('click', '#wpstg-import-backup')\n          .on('click', '#wpstg-import-backup', function() {\n            that.backups.importModal();\n          })\n      // Import\n          .off('click', '.wpstg--backup--import--choose-option')\n          .on('click', '.wpstg--backup--import--choose-option', function() {\n            const $this = $(this);\n            const $parent = $this.parent();\n            if (!$parent.hasClass('wpstg--show-options')) {\n              $parent.addClass('wpstg--show-options');\n              $this.text($this.attr('data-txtChoose'));\n            } else {\n              $parent.removeClass('wpstg--show-options');\n              $this.text($this.attr('data-txtOther'));\n            }\n          })\n          .off('click', '.wpstg--modal--backup--import--search-replace--new')\n          .on('click', '.wpstg--modal--backup--import--search-replace--new', function(e) {\n            e.preventDefault();\n            const $container = $(Swal.getContainer()).find('.wpstg--modal--backup--import--search-replace--input--container');\n            const total = $container.find('.wpstg--modal--backup--import--search-replace--input-group').length;\n            $container.append(that.backups.modal.import.searchReplaceForm.replace(/{i}/g, total));\n          })\n          .off('click', '.wpstg--modal--backup--import--search-replace--remove')\n          .on('click', '.wpstg--modal--backup--import--search-replace--remove', function(e) {\n            e.preventDefault();\n            $(e.target).closest('.wpstg--modal--backup--import--search-replace--input-group').remove();\n          })\n          .off('input', '.wpstg--backup--import--search')\n          .on('input', '.wpstg--backup--import--search', function() {\n            const index = parseInt(this.getAttribute('data-index'));\n            if (!isNaN(index)) {\n              that.backups.modal.import.data.search[index] = this.value;\n            }\n          })\n          .off('input', '.wpstg--backup--import--replace')\n          .on('input', '.wpstg--backup--import--replace', function() {\n            const index = parseInt(this.getAttribute('data-index'));\n            if (!isNaN(index)) {\n              that.backups.modal.import.data.replace[index] = this.value;\n            }\n          })\n      // Other Options\n          .off('click', '.wpstg--backup--import--option[data-option]')\n          .on('click', '.wpstg--backup--import--option[data-option]', function() {\n            const option = this.getAttribute('data-option');\n\n            if (option === 'file') {\n              $('input[type=\"file\"][name=\"wpstg--backup--import--upload--file\"]').trigger('click');\n              return;\n            }\n\n            if (option === 'upload') {\n              that.backups.modal.import.containerFilesystem.hide();\n              that.backups.modal.import.containerUpload.show();\n            }\n\n            if (option !== 'filesystem') {\n              return;\n            }\n\n            that.backups.modal.import.containerUpload.hide();\n            const $containerFilesystem = that.backups.modal.import.containerFilesystem;\n            $containerFilesystem.show();\n\n            fetch(`${ajaxurl}?action=wpstg--backups--import--file-list&_=${Math.random()}&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n                .then(handleFetchErrors)\n                .then((res) => res.json())\n                .then((res) => {\n                  const $ul = $('.wpstg--modal--backup--import--filesystem ul');\n                  $ul.empty();\n\n                  if (!res || isEmpty(res)) {\n                    $ul.append(`<span id=\"wpstg--backups--import--file-list-empty\">`+ wpstg.i18n.noImportFileFound +`</span><br />`);\n                    $('.wpstg--modal--backup--import--search-replace--wrapper').hide();\n                    return;\n                  }\n\n                  $ul.append(`<span id=\"wpstg--backups--import--file-list\">`+ wpstg.i18n.selectFileToImport +`</span><br />`);\n                  res.forEach(function(file, index) {\n                    $ul.append(`\n<li data-filepath=\"${file.fullPath}\" class=\"wpstg--backups--import--file-list--sigle-item\">\n    <ul class=\"wpstg-import-backup-more-info wpstg-import-backup-more-info-` + index + `\">\n        <li style=\"font-weight: bold\">${file.backupName}</li>\n        <li>Created on: ${file.dateCreatedFormatted}</li>\n        <li>Size: ${file.size}</li>\n        <li>\n            <div class=\"wpstg-import-backup-contains-title\">This backup contains:</div>\n            <ul class=\"wpstg-import-backup-contains\">\n            ` + (file.isExportingDatabase ? '<li><span class=\"dashicons dashicons-database wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Database</div></span></li>' : '') + `\n            ` + (file.isExportingPlugins ? '<li><span class=\"dashicons dashicons-admin-plugins wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Plugins</div></span></li>' : '') + `\n            ` + (file.isExportingMuPlugins ? '<li><span class=\"dashicons dashicons-plugins-checked wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Mu-plugins</div></span></li>' : '') + `\n            ` + (file.isExportingThemes ? '<li><span class=\"dashicons dashicons-layout wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Themes</div></span></li>' : '') + `\n            ` + (file.isExportingUploads ? '<li><span class=\"dashicons dashicons-images-alt wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Uploads</div></span></li>' : '') + `\n            ` + (file.isExportingOtherWpContentFiles ? '<li><span class=\"dashicons dashicons-admin-generic wpstg--tooltip\"><div class=\\'wpstg--tooltiptext\\'>Other files in wp-content</div></span></li>' : '') + `\n            </ul>\n        </li>\n        <li>Filename: ${file.name}</li>\n    </ul>\n</li>\n`);\n                  });\n                  return res;\n                })\n                .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n            ;\n          })\n          .off('change', 'input[type=\"file\"][name=\"wpstg--backup--import--upload--file\"]')\n          .on('change', 'input[type=\"file\"][name=\"wpstg--backup--import--upload--file\"]', function() {\n            that.backups.modal.import.setFile(this.files[0] || null);\n          })\n          .off('change', 'input[type=\"radio\"][name=\"backup_import_file\"]')\n          .on('change', 'input[type=\"radio\"][name=\"backup_import_file\"]', function() {\n            $('.wpstg--modal--actions .swal2-confirm').show();\n            $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n            that.backups.modal.import.data.file = this.value;\n          })\n      // Drag & Drop\n          .on('drag dragstart dragend dragover dragenter dragleave drop', '.wpstg--modal--backup--import--upload--container', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n          })\n          .on('dragover dragenter', '.wpstg--modal--backup--import--upload--container', function() {\n            $(this).addClass('wpstg--has-dragover');\n          })\n          .on('dragleave dragend drop', '.wpstg--modal--backup--import--upload--container', function() {\n            $(this).removeClass('wpstg--has-dragover');\n          })\n          .on('drop', '.wpstg--modal--backup--import--upload--container', function(e) {\n          // Uploaded a file through the \"Import Backup modal\"\n            that.backups.modal.import.setFile(e.originalEvent.dataTransfer.files[0] || null);\n          })\n          .on('click', '.wpstg--modal--backup--import--filesystem li', function(e) {\n          // Selected an existing backup in the Import Backup modal\n            const fullPath = $(e.target).closest('.wpstg--backups--import--file-list--sigle-item').data().filepath;\n            if (!fullPath.length) {\n              alert('Error: Could not get file path.');\n              return;\n            }\n            that.backups.modal.import.data.file = fullPath;\n            that.backups.switchModalToConfigure();\n          // $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n          // that.backups.modal.gotoStart();\n          })\n          .on('change', '.wpstg-advanced-options-site input[type=\"checkbox\"]', function(e) {\n          /*\n                 * We use a timeout here to simulate an \"afterChange\" event.\n                 * This allows us to read from the DOM whether the checkbox is checked or not,\n                 * instead of having to read from the event, which would require a lengthier code\n                 * to account for all elements we might want to read.\n                 */\n            setTimeout(function(e) {\n            // Reset\n              document.getElementById('exportUploadsWithoutDatabaseWarning').style.display = 'none';\n\n              // Exporting Media Library without Database\n              const databaseChecked = document.getElementById('includeDatabaseInBackup').checked;\n              const mediaLibraryChecked = document.getElementById('includeMediaLibraryInBackup').checked;\n              if (mediaLibraryChecked && !databaseChecked) {\n                document.getElementById('exportUploadsWithoutDatabaseWarning').style.display = 'block';\n              }\n            }, 100);\n          })\n      ;\n    },\n    fetchListing(isResetErrors = true) {\n      isLoading(true);\n\n      if (isResetErrors) {\n        resetErrors();\n      }\n\n      return fetch(`${ajaxurl}?action=wpstg--backups--listing&_=${Math.random()}&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n          .then(handleFetchErrors)\n          .then((res) => res.json())\n          .then((res) => {\n            showAjaxFatalError(res, '', 'Submit an error report.');\n            cache.get('#wpstg--tab--backup').html(res);\n            isLoading(false);\n            window.dispatchEvent(new Event('backupListingFinished'));\n            return res;\n          })\n          .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n      ;\n    },\n    delete() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg-delete-backup[data-md5]')\n          .on('click', '.wpstg-delete-backup[data-md5]', function(e) {\n            e.preventDefault();\n            resetErrors();\n\n            if (!confirm('Are you sure you want to delete this backup?')) {\n              return;\n            }\n\n            isLoading(true);\n            cache.get('#wpstg-existing-backups').hide();\n            const md5 = this.getAttribute('data-md5');\n            that.ajax(\n                {\n                  action: 'wpstg--backups--delete',\n                  md5: md5,\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                },\n                function(response) {\n                  showAjaxFatalError(response, '', ' Please submit an error report by using the REPORT ISSUE button.');\n                  isLoading(false);\n                  that.backups.fetchListing();\n                },\n            );\n          })\n      ;\n\n      // Force delete if backup tables do not exist\n      // TODO This is bloated, no need extra ID, use existing one?\n      $('#wpstg-error-wrapper')\n          .off('click', '#wpstg-backup-force-delete')\n          .on('click', '#wpstg-backup-force-delete', function(e) {\n            e.preventDefault();\n            resetErrors();\n            isLoading(true);\n            const id = this.getAttribute('data-id');\n\n            if (!confirm('Do you want to delete this backup ' + id + ' from the listed backups?')) {\n              isLoading(false);\n              return false;\n            }\n\n            that.ajax(\n                {\n                  action: 'wpstg--backups--delete',\n                  id: id,\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                },\n                function(response) {\n                  showAjaxFatalError(response, '', ' Please submit an error report by using the REPORT ISSUE button.');\n                  // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                  isLoading(false);\n                },\n            );\n          })\n      ;\n    },\n    create() {\n      const prepareBackup = function(data) {\n        WPStaging.ajax(\n            {\n              action: 'wpstg--backups--prepare-export',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n              wpstgExportData: data,\n            },\n            function(response) {\n              if (response.success) {\n                that.backups.timer.start();\n\n                createBackup();\n              } else {\n                showAjaxFatalError(response.data, '', 'Submit an error report.');\n              }\n            },\n            'json',\n            false,\n            0,\n            1.25,\n        );\n      };\n      const createBackup = function() {\n        resetErrors();\n\n        if (that.backups.isCancelled) {\n          // Swal.close();\n          return;\n        }\n\n        const statusStop = () => {\n          clearInterval(that.backups.processInfo.interval);\n          that.backups.processInfo.interval = null;\n        };\n        const status = () => {\n          if (that.backups.processInfo.interval !== null) {\n            return;\n          }\n          that.backups.processInfo.interval = setInterval(() => {\n            if (true === that.backups.isCancelled) {\n              statusStop();\n              return;\n            }\n\n            if (that.backups.status.hasResponse === false) {\n              return;\n            }\n\n            that.backups.status.hasResponse = false;\n            fetch(`${ajaxurl}?action=wpstg--backups--status&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n                .then((res) => res.json())\n                .then((res) => {\n                  that.backups.status.hasResponse = true;\n                  if (typeof res === 'undefined') {\n                    statusStop();\n                  }\n\n                  if (that.backups.processInfo.title === res.currentStatusTitle) {\n                    return;\n                  }\n\n                  that.backups.processInfo.title = res.currentStatusTitle;\n                  const $container = $(Swal.getContainer());\n                  $container.find('.wpstg--modal--process--title').text(res.currentStatusTitle);\n                  $container.find('.wpstg--modal--process--percent').text('0');\n                })\n                .catch((e) => {\n                  that.backups.status.hasResponse = true;\n                  showAjaxFatalError(e, '', 'Submit an error report.');\n                })\n            ;\n          }, 5000);\n        };\n        WPStaging.ajax(\n            {\n              action: 'wpstg--backups--export',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n            },\n            function(response) {\n              if (typeof response === 'undefined') {\n                setTimeout(function() {\n                  createBackup();\n                }, wpstg.delayReq);\n                return;\n              }\n\n              that.backups.processResponse(response);\n              if (!that.backups.processInfo.interval) {\n                status();\n              }\n\n              if (response.status === false) {\n                createBackup();\n              } else if (response.status === true) {\n                $('#wpstg--progress--status').text('Backup successfully created!');\n                that.backups.type = null;\n                if (that.backups.messages.shouldWarn()) {\n                // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                  that.backups.logsModal();\n                  return;\n                }\n                statusStop();\n                Swal.close();\n                that.backups.fetchListing()\n                    .then(() => {\n                      if (!response.backupMd5) {\n                        showError('Failed to get backup md5 from response');\n                        return;\n                      }\n\n                      // Wait for fetchListing to populate the DOM with the backup data that we want to read\n                      let $el = '';\n                      let timesWaited = 0;\n                      const intervalWaitForBackupInDom = setInterval(function() {\n                        timesWaited++;\n                        $el = $(`.wpstg--backup--download[data-md5=\"${response.backupMd5}\"]`);\n\n                        // Could not find element, let's try again...\n                        if (!$el.length) {\n                          if (timesWaited >= 10) {\n                            // Bail: We tried too many times and couldn't find.\n                            clearInterval(intervalWaitForBackupInDom);\n                          }\n                          return;\n                        }\n\n                        // Found it. No more need for the interval.\n                        clearInterval(intervalWaitForBackupInDom);\n\n                        const backupSize = response.hasOwnProperty('backupSize') ? ' (' + response.backupSize + ')' : '';\n\n                        that.backups.downloadModal({\n                          id: $el.data('id'),\n                          url: $el.data('url'),\n                          title: $el.data('title'),\n                          titleExport: $el.data('title-export'),\n                          btnTxtCancel: $el.data('btn-cancel-txt'),\n                          btnTxtConfirm: $el.data('btn-download-txt') + backupSize,\n                        });\n                        $('.wpstg--modal--download--logs--wrapper').show();\n                        const $logsContainer = $('.wpstg--modal--process--logs');\n                        that.backups.messages.data.all.forEach((message) => {\n                          const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n                          $logsContainer\n                              .append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`)\n                          ;\n                        });\n                      }, 200);\n                    })\n                ;\n              } else {\n                setTimeout(function() {\n                  createBackup();\n                }, wpstg.delayReq);\n              }\n            },\n            'json',\n            false,\n            0, // Don't retry upon failure\n            1.25,\n        );\n      };\n\n      const $body = $('body');\n\n      $body\n          .off('click', '.wpstg--tab--toggle')\n          .on('click', '.wpstg--tab--toggle', function() {\n            const $this = $(this);\n            const $target = $($this.attr('data-target'));\n            $target.toggle();\n            if ($target.is(':visible')) {\n              $this.find('span').text('▼');\n            } else {\n              $this.find('span').text('►');\n            }\n          })\n          .off('change', '[name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent')\n          .on('change', '[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"], input#includeDatabaseInBackup, input#includeOtherFilesInWpContent', function() {\n            const isExportingAnyDir = $('[type=\"checkbox\"][name=\"includedDirectories\\[\\]\"]:checked').length > 0;\n            const isExportingDatabase = $('input#includeDatabaseInBackup:checked').length === 1;\n            const isExportingOtherFilesInWpContent = $('input#includeOtherFilesInWpContent:checked').length === 1;\n            if (!isExportingAnyDir && !isExportingDatabase && !isExportingOtherFilesInWpContent) {\n              $('.swal2-confirm').prop('disabled', true);\n            } else {\n              $('.swal2-confirm').prop('disabled', false);\n            }\n          })\n      ;\n\n      // Add backup name and notes\n      $('#wpstg--tab--backup')\n          .off('click', '#wpstg-new-backup')\n          .on('click', '#wpstg-new-backup', async function(e) {\n            resetErrors();\n            e.preventDefault();\n            that.backups.isCancelled = false;\n\n            if (!that.backups.modal.create.html || !that.backups.modal.create.confirmBtnTxt) {\n              const $newBackupModal = $('#wpstg--modal--backup--new');\n              const html = $newBackupModal.html();\n              const btnTxt = $newBackupModal.attr('data-confirmButtonText');\n              that.backups.modal.create.html = html || null;\n              that.backups.modal.create.confirmBtnTxt = btnTxt || null;\n              $newBackupModal.remove();\n            }\n\n            const {value: formValues} = await Swal.fire({\n              title: '',\n              html: that.backups.modal.create.html,\n              focusConfirm: false,\n              confirmButtonText: that.backups.modal.create.confirmBtnTxt,\n              showCancelButton: true,\n              preConfirm: () => {\n                const container = Swal.getContainer();\n\n                return {\n                  name: container.querySelector('input[name=\"backup_name\"]').value || null,\n                  isExportingPlugins: container.querySelector('#includePluginsInBackup:checked') !== null,\n                  isExportingMuPlugins: container.querySelector('#includeMuPluginsInBackup:checked') !== null,\n                  isExportingThemes: container.querySelector('#includeThemesInBackup:checked') !== null,\n                  isExportingUploads: container.querySelector('#includeMediaLibraryInBackup:checked') !== null,\n                  isExportingOtherWpContentFiles: container.querySelector('#includeOtherFilesInWpContent:checked') !== null,\n                  isExportingDatabase: container.querySelector('#includeDatabaseInBackup:checked') !== null,\n                };\n              },\n            });\n\n            if (!formValues) {\n              return;\n            }\n\n            that.backups.process({\n              execute: () => {\n                that.backups.messages.reset();\n                prepareBackup(formValues);\n              },\n            });\n          })\n      ;\n    },\n    switchModalToConfigure() {\n      that.backups.modal.import.containerUpload.hide();\n      that.backups.modal.import.containerFilesystem.hide();\n      that.backups.modal.import.containerConfigure.show();\n    },\n    // Edit backups name and notes\n    edit() {\n      $('#wpstg--tab--backup')\n          .off('click', '.wpstg--backup--edit[data-md5]')\n          .on('click', '.wpstg--backup--edit[data-md5]', async function(e) {\n            e.preventDefault();\n\n            const $this = $(this);\n            const name = $this.data('name');\n            const notes = $this.data('notes');\n\n            const {value: formValues} = await Swal.fire({\n              title: '',\n              html: `\n                    <label id=\"wpstg-backup-edit-name\">Backup Name</label>\n                    <input id=\"wpstg-backup-edit-name-input\" class=\"swal2-input\" value=\"${name}\">\n                    <label>Additional Notes</label>\n                    <textarea id=\"wpstg-backup-edit-notes-textarea\" class=\"swal2-textarea\">${notes}</textarea>\n                  `,\n              focusConfirm: false,\n              confirmButtonText: 'Update Backup',\n              showCancelButton: true,\n              preConfirm: () => ({\n                name: document.getElementById('wpstg-backup-edit-name-input').value || null,\n                notes: document.getElementById('wpstg-backup-edit-notes-textarea').value || null,\n              }),\n            });\n\n            if (!formValues) {\n              return;\n            }\n\n            that.ajax(\n                {\n                  action: 'wpstg--backups--edit',\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                  md5: $this.data('md5'),\n                  name: formValues.name,\n                  notes: formValues.notes,\n                },\n                function(response) {\n                  showAjaxFatalError(response, '', 'Submit an error report.');\n                  // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                },\n            );\n          })\n      ;\n    },\n    cancel() {\n      that.backups.timer.stop();\n      that.backups.isCancelled = true;\n      Swal.close();\n      setTimeout(() => that.ajax(\n          {\n            action: 'wpstg--backups--cancel',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            type: that.backups.type,\n          },\n          function(response) {\n            showAjaxFatalError(response, '', 'Submit an error report.');\n          },\n      ), 500);\n    },\n    /**\n     * If process.execute exists, process.data and process.onResponse is not used\n     * process = { data: {}, onResponse: (resp) => {}, onAfterClose: () => {}, execute: () => {}, isShowCancelButton: bool }\n     * @param {object} process\n     */\n    process(process) {\n      if (typeof process.execute !== 'function' && (!process.data || !process.onResponse)) {\n        Swal.close();\n        showError('process.data and / or process.onResponse is not set');\n        return;\n      }\n\n      // TODO move to backend and get the contents as xhr response?\n      if (!that.backups.modal.process.html || !that.backups.modal.process.cancelBtnTxt) {\n        const $modal = $('#wpstg--modal--backup--process');\n        const html = $modal.html();\n        const btnTxt = $modal.attr('data-cancelButtonText');\n        that.backups.modal.process.html = html || null;\n        that.backups.modal.process.cancelBtnTxt = btnTxt || null;\n        $modal.remove();\n      }\n\n      $('body')\n          .off('click', '.wpstg--modal--process--logs--tail')\n          .on('click', '.wpstg--modal--process--logs--tail', function(e) {\n            e.preventDefault();\n            const container = Swal.getContainer();\n            const $logs = $(container).find('.wpstg--modal--process--logs');\n            $logs.toggle();\n            if ($logs.is(':visible')) {\n              container.childNodes[0].style.width = '100%';\n              container.style['z-index'] = 9999;\n            } else {\n              container.childNodes[0].style.width = '600px';\n            }\n          })\n      ;\n\n      process.isShowCancelButton = false !== process.isShowCancelButton;\n\n      that.backups.modal.process.modal = Swal.mixin({\n        customClass: {\n          cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n          content: 'wpstg--process--content',\n        },\n        buttonsStyling: false,\n      }).fire({\n        html: that.backups.modal.process.html,\n        cancelButtonText: that.backups.modal.process.cancelBtnTxt,\n        showCancelButton: process.isShowCancelButton,\n        showConfirmButton: false,\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        width: 600,\n        onRender: () => {\n          const _btnCancel = Swal.getContainer().getElementsByClassName('swal2-cancel wpstg--btn--cancel')[0];\n          const btnCancel = _btnCancel.cloneNode(true);\n          _btnCancel.parentNode.replaceChild(btnCancel, _btnCancel);\n\n          btnCancel.addEventListener('click', function(e) {\n            if (confirm('Are You Sure? This will cancel the process!')) {\n              Swal.close();\n            }\n          });\n\n          if (typeof process.execute === 'function') {\n            process.execute();\n            return;\n          }\n\n          if (!process.data || !process.onResponse) {\n            Swal.close();\n            showError('process.data and / or process.onResponse is not set');\n            return;\n          }\n\n          that.ajax(process.data, process.onResponse);\n        },\n        onAfterClose: () => typeof process.onAfterClose === 'function' && process.onAfterClose(),\n        onClose: () => {\n          that.backups.cancel();\n        },\n      });\n    },\n    processResponse(response, useTitle) {\n      if (response === null) {\n        Swal.close();\n        showError('Invalid Response; null');\n        throw new Error(`Invalid Response; ${response}`);\n      }\n\n      const $container = $(Swal.getContainer());\n      const title = () => {\n        if ((response.title || response.statusTitle) && useTitle === true) {\n          $container.find('.wpstg--modal--process--title').text(response.title || response.statusTitle);\n        }\n      };\n      const percentage = () => {\n        if (response.percentage) {\n          $container.find('.wpstg--modal--process--percent').text(response.percentage);\n        }\n      };\n      const logs = () => {\n        if (!response.messages) {\n          return;\n        }\n        const $logsContainer = $container.find('.wpstg--modal--process--logs');\n        const stoppingTypes = [\n          that.backups.messages.ERROR,\n          that.backups.messages.CRITICAL,\n        ];\n        const appendMessage = (message) => {\n          if (Array.isArray(message)) {\n            for (const item of message) {\n              appendMessage(item);\n            }\n            return;\n          }\n          const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n          $logsContainer.append(`<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`);\n\n          if (stoppingTypes.includes(message.type.toLowerCase())) {\n            that.backups.cancel();\n            setTimeout(that.backups.logsModal, 500);\n          }\n        };\n        for (const message of response.messages) {\n          if (!message) {\n            continue;\n          }\n          that.backups.messages.addMessage(message);\n          appendMessage(message);\n        }\n\n        if ($logsContainer.is(':visible')) {\n          $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n        }\n\n        if (!that.backups.messages.shouldWarn()) {\n          return;\n        }\n\n        const $btnShowLogs = $container.find('.wpstg--modal--process--logs--tail');\n        $btnShowLogs.html($btnShowLogs.attr('data-txt-bad'));\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--critical-count')\n            .text(that.backups.messages.countByType(that.backups.messages.CRITICAL))\n        ;\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--error-count')\n            .text(that.backups.messages.countByType(that.backups.messages.ERROR))\n        ;\n\n        $btnShowLogs\n            .find('.wpstg--modal--logs--warning-count')\n            .text(that.backups.messages.countByType(that.backups.messages.WARNING))\n        ;\n      };\n\n      title();\n      percentage();\n      logs();\n\n      if (response.status === true && response.job_done === true) {\n        that.backups.timer.stop();\n        that.backups.isCancelled = true;\n      }\n    },\n    requestData(notation, data) {\n      const obj = {};\n      const keys = notation.split('.');\n      const lastIndex = keys.length - 1;\n      keys.reduce((accumulated, current, index) => {\n        return accumulated[current] = index >= lastIndex ? data : {};\n      }, obj);\n      return obj;\n    },\n    logsModal() {\n      Swal.fire({\n        html: `<div class=\"wpstg--modal--error--logs\" style=\"display:block\"></div><div class=\"wpstg--modal--process--logs\" style=\"display:block\"></div>`,\n        width: '95%',\n        onRender: () => {\n          const $container = $(Swal.getContainer());\n          $container[0].style['z-index'] = 9999;\n\n          const $logsContainer = $container.find('.wpstg--modal--process--logs');\n          const $errorContainer = $container.find('.wpstg--modal--error--logs');\n          const $translations = $('#wpstg--js--translations');\n          const messages = that.backups.messages;\n          const title = $translations.attr('data-modal-logs-title')\n              .replace('{critical}', messages.countByType(messages.CRITICAL))\n              .replace('{errors}', messages.countByType(messages.ERROR))\n              .replace('{warnings}', messages.countByType(messages.WARNING))\n          ;\n\n          $errorContainer.before(`<h3>${title}</h3>`);\n          const warnings = [\n            that.backups.messages.CRITICAL,\n            that.backups.messages.ERROR,\n            that.backups.messages.WARNING,\n          ];\n\n          if (!that.backups.messages.shouldWarn()) {\n            $errorContainer.hide();\n          }\n\n          for (const message of messages.data.all) {\n            const msgClass = `wpstg--modal--process--msg--${message.type.toLowerCase()}`;\n            // TODO RPoC\n            if (warnings.includes(message.type)) {\n              $errorContainer.append(\n                  `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n              );\n            }\n            $logsContainer.append(\n                `<p class=\"${msgClass}\">[${message.type}] - [${message.date}] - ${message.message}</p>`,\n            );\n          }\n        },\n        onOpen: (container) => {\n          const $logsContainer = $(container).find('.wpstg--modal--process--logs');\n          $logsContainer.scrollTop($logsContainer[0].scrollHeight);\n        },\n      });\n    },\n    downloadModal({title = null, titleExport = null, id = null, url = null, btnTxtCancel = 'Cancel', btnTxtConfirm = 'Download'}) {\n      if (null === that.backups.modal.download.html) {\n        const $el = $('#wpstg--modal--backup--download');\n        that.backups.modal.download.html = $el.html();\n        $el.remove();\n      }\n\n      const exportModal = () => Swal.fire({\n        html: `<h2>${titleExport}</h2><span class=\"wpstg-loader\"></span>`,\n        showCancelButton: false,\n        showConfirmButton: false,\n        onRender: () => {\n          that.ajax(\n              {\n                action: 'wpstg--backups--export',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                id,\n              },\n              function(response) {\n                if (!response || !response.success || !response.data || response.data.length < 1) {\n                  return;\n                }\n\n                const a = document.createElement('a');\n                a.style.display = 'none';\n                a.href = response.data;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n\n                Swal.close();\n              },\n          );\n        },\n      });\n\n      Swal.mixin({\n        customClass: {\n          cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n          confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n          actions: 'wpstg--modal--actions',\n        },\n        buttonsStyling: false,\n      })\n          .fire({\n            icon: 'success',\n            html: that.backups.modal.download.html.replace('{title}', title).replace('{btnTxtLog}', 'Show Logs'),\n            cancelButtonText: btnTxtCancel,\n            confirmButtonText: btnTxtConfirm,\n            showCancelButton: true,\n            showConfirmButton: true,\n          })\n          .then((isConfirm) => {\n            if (!isConfirm || !isConfirm.value) {\n              return;\n            }\n\n            if (url && url.length > 0) {\n              window.location.href = url;\n              return;\n            }\n\n            exportModal();\n          })\n      ;\n    },\n    importModal() {\n      const importSiteBackup = (data) => {\n        resetErrors();\n\n        if (that.backups.isCancelled) {\n          // Swal.close();\n          return;\n        }\n\n        that.backups.timer.start();\n\n        const statusStop = () => {\n          clearInterval(that.backups.processInfo.interval);\n          that.backups.processInfo.interval = null;\n        };\n        const status = () => {\n          if (that.backups.processInfo.interval !== null) {\n            return;\n          }\n          that.backups.processInfo.interval = setInterval(() => {\n            if (true === that.backups.isCancelled) {\n              statusStop();\n              return;\n            }\n\n            if (that.backups.status.hasResponse === false) {\n              return;\n            }\n\n            that.backups.status.hasResponse = false;\n            fetch(`${ajaxurl}?action=wpstg--backups--status&process=restore&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}`)\n                .then((res) => res.json())\n                .then((res) => {\n                  that.backups.status.hasResponse = true;\n                  if (typeof res === 'undefined') {\n                    statusStop();\n                  }\n\n                  if (that.backups.processInfo.title === res.currentStatusTitle) {\n                    return;\n                  }\n\n                  that.backups.processInfo.title = res.currentStatusTitle;\n                  const $container = $(Swal.getContainer());\n                  $container.find('.wpstg--modal--process--title').text(res.currentStatusTitle);\n                  $container.find('.wpstg--modal--process--percent').text('0');\n                })\n                .catch((e) => {\n                  that.backups.status.hasResponse = true;\n                  showAjaxFatalError(e, '', 'Submit an error report.');\n                })\n            ;\n          }, 5000);\n        };\n\n        WPStaging.ajax(\n            {\n              action: 'wpstg--backups--import',\n              accessToken: wpstg.accessToken,\n              nonce: wpstg.nonce,\n            },\n            function(response) {\n              if (typeof response === 'undefined') {\n                setTimeout(function() {\n                  importSiteBackup(data);\n                }, wpstg.delayReq);\n                return;\n              }\n\n              that.backups.processResponse(response, true);\n              if (!that.backups.processInfo.interval) {\n                status();\n              }\n\n              if (response.status === false) {\n                importSiteBackup(data);\n              } else if (response.status === true) {\n                $('#wpstg--progress--status').text('Backup successfully imported!');\n                that.backups.type = null;\n                if (that.backups.messages.shouldWarn()) {\n                // noinspection JSIgnoredPromiseFromCall\n                  that.backups.fetchListing();\n                  that.backups.logsModal();\n                  return;\n                }\n                statusStop();\n                const logEntries = $('.wpstg--modal--process--logs').get(1).innerHTML;\n                const html = '<div class=\"wpstg--modal--process--logs\">' + logEntries + '</div>';\n                const issueFound = html.includes('wpstg--modal--process--msg--warning') || html.includes('wpstg--modal--process--msg--error') ? 'Issues(s) found! ' : '';\n                // var errorMessage = html.includes('wpstg--modal--process--msg--error') ? 'Errors(s) found! ' : '';\n                // var Message = warningMessage + errorMessage;\n\n                // Swal.close();\n                Swal.fire({\n                  icon: 'success',\n                  title: 'Finished',\n                  html: 'System imported from backup. <br/><span class=\"wpstg--modal--process--msg-found\">' + issueFound + '</span><button class=\"wpstg--modal--process--logs--tail\" data-txt-bad=\"\">Show Logs</button><br/>' + html,\n                },\n                );\n\n                // noinspection JSIgnoredPromiseFromCall\n                that.backups.fetchListing();\n              } else {\n                setTimeout(function() {\n                  importSiteBackup(data);\n                }, wpstg.delayReq);\n              }\n            },\n            'json',\n            false,\n            0, // Don't retry upon failure\n            1.25,\n        );\n      };\n\n      if (!that.backups.modal.import.html) {\n        const $modal = $('#wpstg--modal--backup--import');\n\n        // Search & Replace Form\n        const $form = $modal.find('.wpstg--modal--backup--import--search-replace--input--container');\n        that.backups.modal.import.searchReplaceForm = $form.html();\n        $form.find('.wpstg--modal--backup--import--search-replace--input-group').remove();\n        $form.html(that.backups.modal.import.searchReplaceForm.replace(/{i}/g, 0));\n\n        that.backups.modal.import.html = $modal.html();\n        that.backups.modal.import.baseDirectory = $modal.attr('data-baseDirectory');\n        that.backups.modal.import.btnTxtNext = $modal.attr('data-nextButtonText');\n        that.backups.modal.import.btnTxtConfirm = $modal.attr('data-confirmButtonText');\n        that.backups.modal.import.btnTxtCancel = $modal.attr('data-cancelButtonText');\n        $modal.remove();\n      }\n\n      that.backups.modal.import.data.search = [];\n      that.backups.modal.import.data.replace = [];\n\n      const $btnConfirm = null;\n      Swal\n          .mixin({\n            customClass: {\n              confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n              cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n              actions: 'wpstg--modal--actions',\n            },\n            buttonsStyling: false,\n          // progressSteps: ['1', '2']\n          })\n          .queue([{\n            html: that.backups.modal.import.html,\n            confirmButtonText: that.backups.modal.import.btnTxtNext,\n            showCancelButton: false,\n            showConfirmButton: true,\n            showLoaderOnConfirm: true,\n            width: 650,\n            onRender() {\n              // $('.wpstg--modal--actions .swal2-confirm').hide();\n\n              // todo: hide this again\n              $('.wpstg--modal--actions .swal2-confirm').show();\n              $('.wpstg--modal--actions .swal2-confirm').prop('disabled', false);\n\n              that.backups.modal.import.containerUpload = $('.wpstg--modal--backup--import--upload');\n              that.backups.modal.import.containerFilesystem = $('.wpstg--modal--backup--import--filesystem');\n              that.backups.modal.import.containerConfigure = $('.wpstg--modal--backup--import--configure');\n            },\n            preConfirm() {\n              const body = new FormData;\n              body.append('accessToken', wpstg.accessToken);\n              body.append('nonce', wpstg.nonce);\n              body.append('filePath', that.backups.modal.import.data.file);\n\n              that.backups.modal.import.data.search.forEach((item, index) => {\n                body.append(`search[${index}]`, item);\n              });\n              that.backups.modal.import.data.replace.forEach((item, index) => {\n                body.append(`replace[${index}]`, item);\n              });\n\n              return fetch(`${ajaxurl}?action=wpstg--backups--import--file-info`, {\n                method: 'POST',\n                body,\n              }).then(handleFetchErrors)\n                  .then((res) => res.json())\n                  .then((html) => {\n                    return Swal.insertQueueStep({\n                      html: html,\n                      confirmButtonText: that.backups.modal.import.btnTxtConfirm,\n                      cancelButtonText: that.backups.modal.import.btnTxtCancel,\n                      showCancelButton: true,\n                    });\n                  })\n                  .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n              ;\n            },\n          }])\n          .then((res) => {\n            if (!res || !res.value || !res.value[1] || res.value[1] !== true) {\n              return;\n            }\n\n            that.backups.isCancelled = false;\n            const data = that.backups.modal.import.data;\n            data['file'] = that.backups.modal.import.baseDirectory + data['file'];\n\n            WPStaging.ajax(\n                {\n                  action: 'wpstg--backups--prepare-import',\n                  accessToken: wpstg.accessToken,\n                  nonce: wpstg.nonce,\n                  wpstgImportData: data,\n                },\n                function(response) {\n                  if (response.success) {\n                    that.backups.process({\n                      execute: () => {\n                        that.backups.messages.reset();\n                        importSiteBackup(data);\n                      },\n                    });\n                  } else {\n                    showAjaxFatalError(response.data, '', 'Submit an error report.');\n                  }\n                },\n                'json',\n                false,\n                0,\n                1.25,\n            );\n          });\n    },\n  };\n\n  window.addEventListener('backupListingFinished', function() {\n    fetch(`${ajaxurl}?action=wpstg--backups--import--file-list&_=${Math.random()}&accessToken=${wpstg.accessToken}&nonce=${wpstg.nonce}&withTemplate=true`)\n        .then(handleFetchErrors)\n        .then((res) => res.json())\n        .then((res) => {\n          const $ul = $('.wpstg-backup-list ul');\n          $ul.empty();\n          $ul.html(res);\n        })\n        .catch((e) => showAjaxFatalError(e, '', 'Submit an error report.'))\n    ;\n  });\n\n  return that;\n})(jQuery);\n\njQuery(document).ready(function() {\n  WPStaging.init();\n  // This is necessary to make WPStaging var accessibile in WP Staging PRO js script\n  window.WPStaging = WPStaging;\n});\n\n/**\n * Report Issue modal\n */\njQuery(document).ready(function($) {\n  $('#wpstg-report-issue-button').on('click', function(e) {\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-backups-report-issue-button', function(e) {\n    $('.wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('#wpstg-report-cancel').on('click', function(e) {\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  /*\n     * Close Success Modal\n     */\n\n  $('body').on('click', '#wpstg-success-button', function(e) {\n    e.preventDefault();\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n  });\n\n  function sendIssueReport(button, forceSend = 'false') {\n    const spinner = button.next();\n    const email = $('.wpstg-report-email').val();\n    const hosting_provider = $('.wpstg-report-hosting-provider').val();\n    const message = $('.wpstg-report-description').val();\n    const syslog = $('.wpstg-report-syslog').is(':checked');\n    const terms = $('.wpstg-report-terms').is(':checked');\n\n    button.attr('disabled', true);\n    spinner.css('visibility', 'visible');\n\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      async: true,\n      data: {\n        'action': 'wpstg_send_report',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'wpstg_email': email,\n        'wpstg_provider': hosting_provider,\n        'wpstg_message': message,\n        'wpstg_syslog': +syslog,\n        'wpstg_terms': +terms,\n        'wpstg_force_send': forceSend,\n      },\n    }).done(function(data) {\n      button.attr('disabled', false);\n      spinner.css('visibility', 'hidden');\n\n      if (data.errors.length > 0) {\n        $('.wpstg-report-issue-form .wpstg-message').remove();\n\n        let errorMessage = $('<div />').addClass('wpstg-message wpstg-error-message');\n        $.each(data.errors, function(key, value) {\n          if (value.status === 'already_submitted') {\n            errorMessage = '';\n            Swal.fire({\n              title: '',\n              customClass: {\n                container: 'wpstg-issue-resubmit-confirmation',\n              },\n              icon: 'warning',\n              html: value.message,\n              showCloseButton: true,\n              showCancelButton: true,\n              focusConfirm: false,\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n            }).then((result) => {\n              if (result.isConfirmed) {\n                sendIssueReport(button, 'true');\n              }\n            });\n          } else {\n            errorMessage.append('<p>' + value + '</p>');\n          }\n        });\n\n        $('.wpstg-report-issue-form').prepend(errorMessage);\n      } else {\n        const successMessage = $('<div />').addClass('wpstg-message wpstg-success-message');\n        successMessage.append('<p>Thanks for submitting your request! You should receive an auto reply mail with your ticket ID immediately for confirmation!<br><br>If you do not get that mail please contact us directly at <strong>support@wp-staging.com</strong></p>');\n\n        $('.wpstg-report-issue-form').html(successMessage);\n        $('.wpstg-success-message').append('<div style=\"float:right;margin-top:10px;\"><a id=\"wpstg-success-button\" href=\"#\">Close</a></div>');\n\n        // Hide message\n        setTimeout(function() {\n          $('.wpstg-report-issue-form').removeClass('wpstg-report-active');\n        }, 2000);\n      }\n    });\n  }\n\n  $('#wpstg-report-submit').on('click', function(e) {\n    const self = $(this);\n    sendIssueReport(self, 'false');\n    e.preventDefault();\n  });\n\n  // Open/close actions drop down menu\n  $(document).on('click', '.wpstg-dropdown>.wpstg-dropdown-toggler', function(e) {\n    e.preventDefault();\n    $(e.target).next('.wpstg-dropdown-menu').toggleClass('shown');\n  });\n\n  // Close action drop down menu if clicked anywhere outside\n  document.addEventListener('click', function(event) {\n    const isClickInside = event.target.closest('.wpstg-dropdown-toggler');\n    if (!isClickInside) {\n      const dropDown = document.getElementsByClassName('wpstg-dropdown-menu');\n      for (let i = 0; i < dropDown.length; i++) {\n        dropDown[i].classList.remove('shown');\n      }\n    }\n  });\n});\n"],"names":["qs","selector","document","querySelector","all","querySelectorAll","addEvent","parent","evt","handler","addEventListener","event","target","matches","closest","slideDown","element","duration","style","display","overflow","height","offsetHeight","transitionProperty","transitionDuration","setTimeout","window","removeProperty","slideUp","WpstgCloneStaging","pageWrapperId","wpstgObject","wpstg","pageWrapper","dom","enableButtonId","enableAction","notyf","Notyf","position","x","y","dismissible","types","type","background","icon","init","addEvents","this","_this","sendRequest","action","fetch","ajaxUrl","method","credentials","body","URLSearchParams","accessToken","nonce","headers","then","response","ok","json","Promise","reject","data","success","location","reload","message","_this2","error","i18n","console","warn","WpstgDirectoryNavigation","directoryListingSelector","directoryListingContainer","dirCheckboxSelector","dirExpandSelector","unselectAllDirsSelector","selectDefaultDirsSelector","fetchChildrenAction","currentCheckboxElement","currentParentDiv","currentLoader","existingExcludes","excludedDirectories","isDefaultSelected","preventDefault","toggleDirExpand","unselectAll","selectDefault","log","parseExcludes","parentElement","previousSibling","getAttribute","dirPath","value","isChecked","checked","forceDefault","setAttribute","dirContainer","createElement","classList","add","innerHTML","JSON","parse","directoryListing","appendChild","alert","getExcludedDirectories","forEach","_this3","isParentExcluded","push","exclude","isExcludeScanned","join","settings","directorySeparator","path","isParentAlreadyExcluded","dir","startsWith","getExtraDirectoriesRootOnly","extraDirectories","extraDirectoriesTextArea","extraCustomDirectories","split","concat","length","WpstgExcludeFilters","excludeFilterContainerSelector","excludeContainer","excludeTableBody","addFileSizeExclude","addFileExtExclude","addFileNameExclude","addDirNameExclude","clearExcludes","removeExclude","addExcludeRuleRow","templateName","excludeRowTemplate","excludeRow","content","cloneNode","e","removeChild","trim","getExcludeFilters","globExcludes","sizeExcludes","sizeCompares","sizeSizes","sizeByte","Object","entries","key","sizeInput","ext","cleanStringForGlob","fileNamesPos","fileNames","fileInput","fileName","dirNamesPos","dirNames","dirInput","dirName","filter","onlyUnique","index","self","indexOf","replace","WpstgModal","confirmAction","show","swalOptions","additionalParams","callback","Swal","fire","result","triggerConfirmAction","assign","WpstgResetModal","cloneID","workflowSelector","fetchExcludeSettingsAction","modalErrorAction","workflow","resetButtonClass","resetModalContainerClass","resetTabSelector","directoryNavigator","excludeFilters","isAllTablesChecked","resetModalContainer","toggleContent","selectDefaultTables","toggleTableSelection","toggleDirectoryNavigation","updateDirectorySelection","contentId","tabTriangle","isCollapsed","contains","transform","remove","showModal","swalPromise","loadModal","fetchCloneExcludes","title","html","getAjaxLoader","width","focusConfirm","customClass","confirmButton","container","confirmButtonText","resetClone","showCancelButton","clone","job","modal","renderError","getDirectoryNavigator","wpstgIcon","cbElement","subDirectories","sibling","nextElementSibling","parElem","i","children","options","multisitePattern","tblprefix","singleSitePattern","option","name","isMultisite","match","removeAttribute","WPStaging","$","ajaxSpinner","that","isCancelled","isFinished","getLogs","time","executionTime","progressBar","cloneExcludeFilters","cache","elements","get","inArray","jQuery","refresh","showError","css","text","removeClass","hide","warnIfClosingDuringProcess","returnValue","showAjaxFatalError","prependMessage","appendMessage","removeEventListener","handleFetchErrors","status","statusText","resetErrors","validateTargetHost","the_domain","val","test","cloneActions","$workFlow","on","confirm","$this","prop","append","cancelCloning","startCloning","cancelCloningUpdate","restart","$existingClones","ajax","animate","scrollTop","offset","top","addClass","deleteClone","jsonResponse","tryParseJson","showErrorModal","checkDiskSpace","switchStep","resetModal","dirNavigator","exclFilters","includedTables","getIncludedTables","excludeSizeRules","encodeURIComponent","sizes","excludeGlobRules","globs","dataType","showErrors","tryCount","incrementRatio","retryLimit","retryTimeout","parseInt","isNaN","url","ajaxurl","Date","now","xhr","textStatus","errorThrown","errorCode","statusCode","each","getExcludedTables","excludedTables","verifyExternalDatabase","databaseUser","databasePassword","databaseServer","databaseDatabase","proceedCloning","error_type","render","checks","production","staging","getTime","toString","rules","databasePrefix","cloneDir","cloneHostname","emailsAllowed","is","uploadsSymlinked","cleanPluginsThemes","cleanUploadsDir","getCloningData","sendCloningAjax","object","excludeOptions","loadOverview","deleteDir","find","timer","$div","constructor","Array","date","scrollHeight","usedspace","isLoading","clearInterval","convertSeconds","setInterval","getElementById","seconds","setSeconds","toISOString","substr","processing","delayReq","last_msg","job_done","$link1","$link","attr","msg","cloneResetComplete","cloneUpdateComplete","finish","percentage","toFixed","step","isAllChecked","urlSpinner","devicePixelRatio","siblings","slideToggle","$directory","parents","removeAttr","slug","toLowerCase","normalize","$targetDir","$targetUri","uri","after","focus","onlyUpdateMessage","stepButtons","$section","toggleClass","hasClass","$wrapper","$menuItems","not","backups","dispatchEvent","Event","processInfo","interval","create","confirmBtnTxt","process","cancelBtnTxt","download","btnTxtNext","btnTxtConfirm","btnTxtCancel","searchReplaceForm","file","containerUpload","containerFilesystem","setFile","upload","bytes","size","Math","floor","pow","start","baseDirectory","search","messages","WARNING","ERROR","INFO","DEBUG","CRITICAL","info","critical","warning","debug","shouldWarn","countByType","addMessage","isArray","item","reset","totalSeconds","stop","reader","iop","uploadInfo","isShow","$containerUpload","$containerUploader","FileReader","sendChunk","startsAt","isReset","endsAt","blob","slice","onloadend","readyState","DONE","FormData","res","writtenBytes","percent","switchModalToConfigure","readAsDataURL","hasResponse","reTryAfter","edit","fetchListing","href","downloadModal","titleExport","id","importModal","off","$parent","$container","getContainer","total","random","$ul","empty","obj","hasOwnProperty","isEmpty","noImportFileFound","selectFileToImport","fullPath","backupName","dateCreatedFormatted","isExportingDatabase","isExportingPlugins","isExportingMuPlugins","isExportingThemes","isExportingUploads","isExportingOtherWpContentFiles","trigger","files","stopPropagation","originalEvent","dataTransfer","filepath","databaseChecked","isResetErrors","md5","createBackup","statusStop","processResponse","currentStatusTitle","logsModal","close","backupMd5","$el","timesWaited","intervalWaitForBackupInDom","backupSize","$logsContainer","msgClass","$target","toggle","isExportingAnyDir","isExportingOtherFilesInWpContent","$newBackupModal","btnTxt","preConfirm","formValues","execute","wpstgExportData","containerConfigure","notes","cancel","onResponse","$modal","$logs","childNodes","isShowCancelButton","mixin","cancelButton","buttonsStyling","cancelButtonText","showConfirmButton","allowOutsideClick","allowEscapeKey","onRender","_btnCancel","getElementsByClassName","btnCancel","parentNode","replaceChild","onAfterClose","onClose","useTitle","Error","statusTitle","stoppingTypes","includes","$btnShowLogs","logs","requestData","notation","keys","lastIndex","reduce","accumulated","current","$errorContainer","$translations","before","warnings","onOpen","actions","isConfirm","a","click","importSiteBackup","issueFound","$form","queue","showLoaderOnConfirm","insertQueueStep","wpstgImportData","ready","sendIssueReport","button","forceSend","spinner","next","email","hosting_provider","syslog","terms","async","done","errors","errorMessage","showCloseButton","isConfirmed","prepend","successMessage","dropDown"],"mappings":"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"}